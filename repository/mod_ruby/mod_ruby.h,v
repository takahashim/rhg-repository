head	1.45;
access;
symbols
	release_1_0_1:1.44.2.1
	version_1_0-branch:1.44.0.2
	root-of-version_1_0:1.44
	release_1_0_0:1.44
	release_0_9_9:1.43
	release_0_9_8:1.38
	release_0_9_7:1.35
	release_0_9_6:1.34
	release_0_9_5:1.33
	autoconfiscation-branch:1.32.0.2
	root-of-autoconfiscation:1.32
	release_0_9_4:1.32
	release_0_9_3:1.30
	release_0_9_2:1.29
	release_0_9_1:1.28
	release_0_9_0:1.26
	release_0_8_6:1.26
	release_0_8_5:1.24
	release_0_8_4:1.21
	release_0_8_3:1.18
	release_0_8_2:1.17
	release_0_8_1:1.15
	release_0_8_0:1.13
	release_0_2_0:1.8;
locks; strict;
comment	@ * @;


1.45
date	2002.08.29.04.58.01;	author shugo;	state Exp;
branches;
next	1.44;

1.44
date	2002.08.20.03.59.53;	author shugo;	state Exp;
branches
	1.44.2.1;
next	1.43;

1.43
date	2002.06.11.04.23.57;	author shugo;	state Exp;
branches;
next	1.42;

1.42
date	2002.05.21.05.16.36;	author shugo;	state Exp;
branches;
next	1.41;

1.41
date	2002.05.21.04.59.21;	author shugo;	state Exp;
branches;
next	1.40;

1.40
date	2002.05.21.04.38.57;	author shugo;	state Exp;
branches;
next	1.39;

1.39
date	2002.04.30.05.51.05;	author shugo;	state Exp;
branches;
next	1.38;

1.38
date	2002.03.27.05.17.20;	author shugo;	state Exp;
branches;
next	1.37;

1.37
date	2002.03.05.05.57.35;	author shugo;	state Exp;
branches;
next	1.36;

1.36
date	2002.02.28.06.41.17;	author shugo;	state Exp;
branches;
next	1.35;

1.35
date	2002.02.12.04.04.33;	author shugo;	state Exp;
branches;
next	1.34;

1.34
date	2002.01.30.08.42.34;	author shugo;	state Exp;
branches;
next	1.33;

1.33
date	2001.12.27.06.31.45;	author shugo;	state Exp;
branches;
next	1.32;

1.32
date	2001.10.10.03.16.20;	author shugo;	state Exp;
branches
	1.32.2.1;
next	1.31;

1.31
date	2001.10.04.09.19.38;	author shugo;	state Exp;
branches;
next	1.30;

1.30
date	2001.08.24.02.25.05;	author shugo;	state Exp;
branches;
next	1.29;

1.29
date	2001.08.13.02.27.17;	author shugo;	state Exp;
branches;
next	1.28;

1.28
date	2001.08.06.05.39.37;	author shugo;	state Exp;
branches;
next	1.27;

1.27
date	2001.07.27.04.46.40;	author shugo;	state Exp;
branches;
next	1.26;

1.26
date	2001.07.06.05.27.44;	author shugo;	state Exp;
branches;
next	1.25;

1.25
date	2001.07.02.03.47.49;	author shugo;	state Exp;
branches;
next	1.24;

1.24
date	2001.06.22.03.18.26;	author shugo;	state Exp;
branches;
next	1.23;

1.23
date	2001.06.21.09.34.49;	author shugo;	state Exp;
branches;
next	1.22;

1.22
date	2001.06.21.07.50.33;	author shugo;	state Exp;
branches;
next	1.21;

1.21
date	2001.06.11.02.14.15;	author shugo;	state Exp;
branches;
next	1.20;

1.20
date	2001.06.10.03.11.47;	author shugo;	state Exp;
branches;
next	1.19;

1.19
date	2001.06.09.09.50.28;	author shugo;	state Exp;
branches;
next	1.18;

1.18
date	2001.06.06.09.05.20;	author shugo;	state Exp;
branches;
next	1.17;

1.17
date	2001.06.04.03.07.20;	author shugo;	state Exp;
branches;
next	1.16;

1.16
date	2001.05.02.08.45.26;	author shugo;	state Exp;
branches;
next	1.15;

1.15
date	2001.04.27.04.51.59;	author shugo;	state Exp;
branches;
next	1.14;

1.14
date	2001.04.19.06.13.25;	author shugo;	state Exp;
branches;
next	1.13;

1.13
date	2001.04.12.09.08.34;	author shugo;	state Exp;
branches;
next	1.12;

1.12
date	2001.04.10.08.03.55;	author shugo;	state Exp;
branches;
next	1.11;

1.11
date	2001.01.24.07.54.37;	author shugo;	state Exp;
branches;
next	1.10;

1.10
date	2000.11.23.09.25.06;	author shugo;	state Exp;
branches;
next	1.9;

1.9
date	2000.10.04.15.38.46;	author shugo;	state Exp;
branches;
next	1.8;

1.8
date	2000.08.31.02.50.47;	author shugo;	state Exp;
branches;
next	1.7;

1.7
date	2000.08.02.05.16.40;	author shugo;	state Exp;
branches;
next	1.6;

1.6
date	2000.05.18.08.09.43;	author shugo;	state Exp;
branches;
next	1.5;

1.5
date	2000.03.31.09.53.40;	author shugo;	state Exp;
branches;
next	1.4;

1.4
date	2000.03.30.08.08.11;	author shugo;	state Exp;
branches;
next	1.3;

1.3
date	99.08.10.06.37.51;	author shugo;	state Exp;
branches;
next	1.2;

1.2
date	99.07.06.09.36.54;	author shugo;	state Exp;
branches;
next	1.1;

1.1
date	99.06.21.07.14.11;	author shugo;	state Exp;
branches;
next	;

1.32.2.1
date	2001.10.22.05.02.43;	author shugo;	state Exp;
branches;
next	;

1.44.2.1
date	2002.09.05.04.31.19;	author shugo;	state Exp;
branches;
next	;


desc
@@


1.45
log
@* lib/auto-reload.rb (require): check the dependency of libraries.
@
text
@/*
 * $Id: mod_ruby.h,v 1.44 2002/08/20 03:59:53 shugo Exp $
 * Copyright (C) 2000  ZetaBITS, Inc.
 * Copyright (C) 2000  Information-technology Promotion Agency, Japan
 * Copyright (C) 2000  Shugo Maeda <shugo@@modruby.net>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 */

#ifndef MOD_RUBY_H
#define MOD_RUBY_H

#include "httpd.h"
#include "http_config.h"
#include "http_core.h"
#include "http_log.h"
#include "http_main.h"
#include "http_protocol.h"
#include "http_request.h"
#include "util_script.h"

#include "ruby.h"
#include "rubyio.h"
#include "version.h"
#include "util.h"

#ifdef STANDARD20_MODULE_STUFF /* Apache 2.x */

#define APACHE2

#include "ap_compat.h"
#include "apr_pools.h"
#include "apr_strings.h"
#include "apr_tables.h"

typedef apr_pool_t pool;
typedef apr_array_header_t array_header;
typedef apr_table_t table;
typedef apr_table_entry_t table_entry;
#define APR_CLEANUP_RETURN_TYPE apr_status_t
#define APR_CLEANUP_RETURN_SUCCESS() { \
    return APR_SUCCESS; \
}
#define APLOG_STATUS(n) n,
#define ap_soft_timeout(s, r) ;
#define ap_hard_timeout(s, r) ;
#define ap_kill_timeout(r) ;

#else /* Apache 1.x */

#define APLOG_STATUS(n)
#define APR_CLEANUP_RETURN_TYPE void
#define APR_CLEANUP_RETURN_SUCCESS() return

#include "http_conf_globals.h"

#endif

#define MOD_RUBY_STRING_VERSION "mod_ruby/1.1.0"
#define RUBY_GATEWAY_INTERFACE "CGI-Ruby/1.1"

typedef struct {
    array_header *load_path;
    table *env;
    int timeout;
} ruby_server_config;

typedef struct {
    char *kcode;
    table *env;
    int safe_level;
    int output_mode;
    array_header *load_path;
    array_header *ruby_handler;
    array_header *ruby_trans_handler;
    array_header *ruby_authen_handler;
    array_header *ruby_authz_handler;
    array_header *ruby_access_handler;
    array_header *ruby_type_handler;
    array_header *ruby_fixup_handler;
    array_header *ruby_log_handler;
    array_header *ruby_header_parser_handler;
    array_header *ruby_post_read_request_handler;
    array_header *ruby_init_handler;
    array_header *ruby_cleanup_handler;
} ruby_dir_config;

typedef struct {
    char *filename;
    ruby_server_config *server_config;
    ruby_dir_config *dir_config;
} ruby_library_context;

#define MR_DEFAULT_TIMEOUT 270
#define MR_DEFAULT_SAFE_LEVEL 1

#define MR_OUTPUT_DEFAULT	0
#define MR_OUTPUT_NOSYNC	1
#define MR_OUTPUT_SYNC		2
#define MR_OUTPUT_SYNC_HEADER	3

/* copied from eval.c */
#define TAG_RETURN      0x1
#define TAG_BREAK       0x2
#define TAG_NEXT        0x3
#define TAG_RETRY       0x4
#define TAG_REDO        0x5
#define TAG_RAISE       0x6
#define TAG_THROW       0x7
#define TAG_FATAL       0x8
#define TAG_MASK        0xf

extern MODULE_VAR_EXPORT module ruby_module;
extern array_header *ruby_required_libraries;

VALUE rb_protect_funcall(VALUE recv, ID mid, int *state, int argc, ...);
void ruby_log_error(server_rec *s, VALUE errmsg);
VALUE ruby_get_error_info(int state);
int ruby_running();
int ruby_require(char *filename,
		 ruby_server_config *sconf, ruby_dir_config *dconf);
void ruby_add_path(const char *path);
void rb_setup_cgi_env(request_rec *r);

#define get_server_config(s) \
	((ruby_server_config *) ap_get_module_config(s->module_config, \
						     &ruby_module))
#define get_dir_config(r) \
	((ruby_dir_config *) ap_get_module_config(r->per_dir_config, \
						  &ruby_module))

#endif /* !MOD_RUBY_H */

/*
 * Local variables:
 * mode: C
 * tab-width: 8
 * End:
 */
@


1.44
log
@* version 1.0.0 released.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.43 2002/06/11 04:23:57 shugo Exp $
d79 1
a79 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/1.0.0"
@


1.44.2.1
log
@* mod_ruby.h: increase version number.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.44 2002/08/20 03:59:53 shugo Exp $
d79 1
a79 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/1.0.1"
@


1.43
log
@* version 0.9.9 released.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.42 2002/05/21 05:16:36 shugo Exp $
d79 1
a79 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.9.9"
@


1.42
log
@* ruby_config.c (ruby_cmd_require): push ruby_server_config* and
ruby_dir_config* to ruby_required_libraries.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.41 2002/05/21 04:59:21 shugo Exp $
d79 1
a79 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.9.8"
@


1.41
log
@* apachelib.c (apache_server_root): moved from
request.c:request_server_root().
* request.c (request_proxy_q): fix for Apache2.
* request.c (request_proxy_pass_q): ditto.
* request.c (request_lookup_uri): ditto.
* request.c (request_lookup_file): ditto.
* request.c (request_server_root): new method.
* request.c (request_get_dispatch_handler): ditto.
* request.c (request_set_dispatch_handler): ditto.
* request.c (request_proxy_q): ditto.
* request.c (request_proxy_pass_q): ditto.
* request.c (request_get_cache_resp): ditto.
* request.c (request_set_cache_resp): ditto.
* request.c (request_get_cache_resp): ditto.
* request.c (request_lookup_uri): ditto.
* request.c (request_lookup_file): ditto.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.40 2002/05/21 04:38:57 shugo Exp $
d107 6
@


1.40
log
@* apachelib.c (apache_server_root): moved from
request.c:request_server_root().
* request.c (request_proxy_q): fix for Apache2.
* request.c (request_proxy_pass_q): ditto.
* request.c (request_lookup_uri): ditto.
* request.c (request_lookup_file): ditto.
* request.c (request_server_root): new method.
* request.c (request_get_dispatch_handler): ditto.
* request.c (request_set_dispatch_handler): ditto.
* request.c (request_proxy_q): ditto.
* request.c (request_proxy_pass_q): ditto.
* request.c (request_get_cache_resp): ditto.
* request.c (request_set_cache_resp): ditto.
* request.c (request_get_cache_resp): ditto.
* request.c (request_lookup_uri): ditto.
* request.c (request_lookup_file): ditto.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.39 2002/04/30 05:51:05 shugo Exp $
d134 2
a135 1
int ruby_require(char*);
@


1.39
log
@	* mod_ruby.h: Moved several define's from mod_ruby.c.

	* mod_ruby.c (per_request_cleanup): fixed SEGV for internal
	subrequest clean up.

	* request.c (request_last) new method.

	* request.c (request_internal_redirect) ditto.

	* request.c (request_custom_response) ditto.

	* request.c (request_is_main) ditto.

	* request.c (request_is_initial) ditto.

	* request.c (request_bytes_sent) ditto.

	* request.c (request_send_fd) ditto.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.38 2002/03/27 05:17:20 shugo Exp $
d74 2
@


1.38
log
@* request.c (request_set_user): new method.

* request.c (request_set_auth_type): ditto.

* request.c (request_set_auth_name): ditto.

* connection.c (connection_set_user): ditto.

* connection.c (connection_set_auth_type): ditto.

* connection.c (connection_remote_port): fix for Apache2.

* connection.c (connection_local_port): ditto.

* connection.c (connection_remote_port): new method.

* connection.c (connection_local_port): ditto.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.37 2002/03/05 05:57:35 shugo Exp $
d43 1
d113 11
@


1.37
log
@* supports Apache 2.0.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.36 2002/02/28 06:41:17 shugo Exp $
d47 2
@


1.36
log
@* ruby_config.c (ruby_cmd_add_path): allow to use RubyAddPath in
.htaccess.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.35 2002/02/12 04:04:33 shugo Exp $
d32 41
@


1.35
log
@* version 0.9.7 released.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.34 2002/01/30 08:42:34 shugo Exp $
d33 1
a33 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.9.7"
d47 1
@


1.34
log
@* version 0.9.6 released.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.33 2001/12/27 06:31:45 shugo Exp $
d33 1
a33 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.9.6"
@


1.33
log
@* version 0.9.5 released.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.32 2001/10/10 03:16:20 shugo Exp $
d33 1
a33 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.9.5"
d74 1
@


1.32
log
@* ruby_config.c (ruby_cmd_output_mode): new directive RubyOutputMode.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.31 2001/10/04 09:19:38 shugo Exp $
d33 1
a33 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.9.4"
@


1.32.2.1
log
@* mod_ruby.c: use config.h for VERSION.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.32 2001/10/10 03:16:20 shugo Exp $
d33 1
@


1.31
log
@*** empty log message ***
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.30 2001/08/24 02:25:05 shugo Exp $
d46 1
d60 8
@


1.30
log
@* version 0.9.3 released.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.29 2001/08/13 02:27:17 shugo Exp $
d33 1
a33 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.9.3"
d63 2
a64 1
void ruby_log_error(server_rec *s, int state);
@


1.29
log
@* version 0.9.2 released.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.28 2001/08/06 05:39:37 shugo Exp $
d33 1
a33 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.9.2"
@


1.28
log
@* version 0.9.1 released.
@
text
@d2 1
a2 1
 * $Id$
d33 1
a33 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.9.1"
@


1.27
log
@* mod_ruby.c (per_request_cleanup): do not restore rb_stdout.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.26 2001/07/06 05:27:44 shugo Exp $
d6 1
d8 8
a15 1
 * Author: Shugo Maeda <shugo@@modruby.net>
d17 11
a27 16
 * This file is part of mod_ruby.
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this program; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307
 * USA.
@


1.26
log
@* version 0.9.0 released.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.25 2001/07/02 03:47:49 shugo Exp $
d30 1
a30 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.9.0"
@


1.25
log
@* request.c (request_set_content_type): accept nil.
* request.c (request_set_content_encoding): ditto.
* request.c (request_set_content_languages): ditto.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.24 2001/06/22 03:18:26 shugo Exp $
d30 1
a30 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.8.6"
@


1.24
log
@* mod_ruby.c (load_eruby_script): don't use print_error().
* mod_ruby.c (ruby_handler): multi-handler support.
* ruby_config.c (ruby_cmd_post_read_request_handler): new handler.
* ruby_config.c (ruby_cmd_init_handler): ditto.
* ruby_config.c (ruby_cmd_cleanup_handler): ditto.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.23 2001/06/21 09:34:49 shugo Exp $
d30 1
a30 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.8.5"
@


1.23
log
@* ruby_config.c (ruby_cmd_require): use ruby_required_libraries
for virtual hosts.
* lib/apache/erb-run.rb: no need to inherit Apache::RubyRun.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.22 2001/06/21 07:50:33 shugo Exp $
d43 12
a54 9
    char *ruby_handler;
    char *ruby_trans_handler;
    char *ruby_authen_handler;
    char *ruby_authz_handler;
    char *ruby_access_handler;
    char *ruby_type_handler;
    char *ruby_fixup_handler;
    char *ruby_log_handler;
    char *ruby_header_parser_handler;
@


1.22
log
@* mod_ruby.c (ruby_startup): removed Ruby version from version
	component.
* mod_ruby.c (ruby_startup): log error if ruby_require() fails.
* mod_ruby.c (ruby_handler): don't call rb_apache_request_flush()
on error.
* request.c (rb_apache_request_new): should initialize data->server.
* lib/apache/ruby-run.rb (handler): require ExecCGI and exec
permission.
* lib/apache/eruby-run.rb (handler): require ExecCGI.
* lib/apache/cgi-support.rb: new file.
* lib/apache/erb-run.rb: new file, supports ERb.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.21 2001/06/11 02:14:15 shugo Exp $
a34 1
    array_header *required_files;
d55 3
@


1.21
log
@* mod_ruby.c (ruby_handler_0): handle SystemExit correctly.
* array_header.c (array_length): new method.
* table.c: renamed ApacheInTable to ApacheRestrictedTable.
* request.c (rb_apache_request_new): don't set content_type.
* request.c (request_headers_in): return non-restricted table for
RubyAuthenHandler.
* request.c (request_notes): removed.
* request.c (request_allow_options): new method.
* request.c (request_allow_overrides): ditto.
* request.c (request_default_type): ditto.
* request.c (request_construct_url): ditto.
* request.c (request_auth_type): ditto.
* request.c (request_auth_name): ditto.
* request.c (request_satisfies): ditto.
* request.c (request_requires): ditto.
* request.c (request_note_auth_failure): ditto.
* request.c (request_note_basic_auth_failure): ditto.
* request.c (request_note_digest_auth_failure): ditto.
* request.c (request_basic_auth_pw): ditto.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.20 2001/06/10 03:11:47 shugo Exp $
d30 1
a30 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.8.4"
@


1.20
log
@* mod_ruby.c (ruby_translate_handler): new handler.
* mod_ruby.c (ruby_authen_handler): ditto.
* mod_ruby.c (ruby_authen_handler): ditto.
* mod_ruby.c (ruby_authz_handler): ditto.
* mod_ruby.c (ruby_access_handler): ditto.
* mod_ruby.c (ruby_type_handler): ditto.
* mod_ruby.c (ruby_fixup_handler): ditto.
* mod_ruby.c (ruby_log_handler): ditto.
* mod_ruby.c (ruby_header_parser_handler): ditto.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.19 2001/06/09 09:50:28 shugo Exp $
d60 7
@


1.19
log
@* configure.rb.in: check for gcc.
* mod_ruby.c (ruby_object_handler_0): call log_error().
* lib/apache/eruby-run.rb (handler): set @@compiler.sourcefile.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.18 2001/06/06 09:05:20 shugo Exp $
d44 9
a52 1
    array_header *ruby_handlers;
@


1.18
log
@* version 0.8.3 released.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.17 2001/06/04 03:07:20 shugo Exp $
d30 1
a30 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.8.3"
d44 1
a44 1
    array_header *handlers;
@


1.17
log
@* lib/auto-reload: new file.
* lib/apache/ruby-run.rb: renamed from ruby/apache/ruby.rb.
* lib/apache/eruby-run.rb: renamed from ruby/apache/eruby.rb.
* lib/apache/rd2html.rb: renamed from ruby/apache/rd2html.rb.
* lib/apache/eruby-run.rb (handler): specify filename for backtrace.
* changed license from GPL to LGPL.
* COPYING: new file.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.16 2001/05/02 08:45:26 shugo Exp $
d30 1
a30 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.8.2"
@


1.16
log
@* fixed copyright notice.
* array_header.c: new file for Apache::ArrayHeader.
* server.c: added some methods.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.15 2001/04/27 04:51:59 shugo Exp $
d11 4
a14 4
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
d18 2
a19 2
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
d21 4
a24 4
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
 * 02111-1307, USA
@


1.15
log
@* ruby/apache/ruby.rb (emulate_cgi): new method.
* ruby/apache/eruby.rb: inherit Apache::Ruby.
* table.c: new file for Apache::Table.
* connection.c: new file for Apache::Connection.
* server.c: new file for Apache::Server.
* request.c: new file for Apache::Request.
* request.c (request_setup_cgi_env): new method.
* mod_ruby.c (script_handler): resotre original $stdin, $stdout
and $>.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.14 2001/04/19 06:13:25 shugo Exp $
d5 1
d30 1
a30 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.8.1"
@


1.14
log
@* ruby/apache/ruby.rb: new handler Apache::Ruby.
* ruby/apache/rd2html.rb: renamed from mod_rd2html.rb.
* apachelib.c (request_read): do not use buffer.
* apachelib.c (ruby_init_apachelib): remove methods from
Apache::request. (gets, readline, readlines, each, getc,
readchar, ungetc, tell, seek, rewind, pos, pos=)
* apachelib.c (ruby_init_apachelib): new class Apache::Server.
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.13 2001/04/12 09:08:34 shugo Exp $
d50 1
@


1.13
log
@*** empty log message ***
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.12 2001/04/10 08:03:55 shugo Exp $
d6 1
a6 1
 * Author: Shugo Maeda <shugo@@ruby-lang.org>
d29 1
a29 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.8.0"
d43 1
a43 1
    array_header *handler_objects;
@


1.12
log
@*** empty log message ***
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.11 2001/01/24 07:54:37 shugo Exp $
d29 1
a29 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.3.0"
a36 1
    int safe;
d42 1
@


1.11
log
@fixed Apache::InTable#[].
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.10 2000/11/23 09:25:06 shugo Exp $
d29 1
a29 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.2.3"
d33 1
d43 1
d49 1
@


1.10
log
@*** empty log message ***
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.9 2000/10/04 15:38:46 shugo Exp $
d29 1
a29 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.2.2"
@


1.9
log
@*** empty log message ***
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.8 2000/08/31 02:50:47 shugo Exp $
d29 1
a29 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.2.1"
d36 1
@


1.8
log
@*** empty log message ***
@
text
@d2 5
a6 2
 * $Id: mod_ruby.h,v 1.7 2000/08/02 05:16:40 shugo Exp $
 * Copyright (C) 1998-1999  Network Applied Communication Laboratory, Inc.
d29 1
a29 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.2.0"
@


1.7
log
@*** empty log message ***
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.6 2000/05/18 08:09:43 shugo Exp $
d26 1
a26 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.1.9"
@


1.6
log
@*** empty log message ***
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.5 2000/03/31 09:53:40 shugo Exp $
d26 1
a26 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.1.8"
@


1.5
log
@*** empty log message ***
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.4 2000/03/30 08:08:11 shugo Exp $
d26 1
a26 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.1.7"
@


1.4
log
@*** empty log message ***
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.3 1999/08/10 06:37:51 shugo Exp $
d26 1
a26 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.1.6"
@


1.3
log
@*** empty log message ***
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.2 1999/07/06 09:36:54 shugo Exp $
d26 1
a26 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.1.4"
@


1.2
log
@*** empty log message ***
@
text
@d2 1
a2 1
 * $Id: mod_ruby.h,v 1.1 1999/06/21 07:14:11 shugo Exp $
d26 1
a26 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.1.3"
@


1.1
log
@*** empty log message ***
@
text
@d2 1
a2 1
 * $Id$
d26 1
a26 1
#define MOD_RUBY_STRING_VERSION "mod_ruby/0.1.2"
@
