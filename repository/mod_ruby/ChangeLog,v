head	1.139;
access;
symbols
	release_1_0_1:1.132.2.5
	version_1_0-branch:1.132.0.2
	root-of-version_1_0:1.132
	release_1_0_0:1.132
	release_0_9_9:1.124
	release_0_9_8:1.111
	release_0_9_7:1.103
	release_0_9_6:1.102
	release_0_9_5:1.99
	autoconfiscation-branch:1.96.0.2
	root-of-autoconfiscation:1.96
	release_0_9_4:1.96
	release_0_9_3:1.89
	release_0_9_2:1.87
	release_0_9_1:1.86
	release_0_9_0:1.82
	release_0_8_6:1.82
	release_0_8_5:1.76
	release_0_8_4:1.70
	release_0_8_3:1.64
	release_0_8_2:1.62
	release_0_8_1:1.50
	release_0_8_0:1.46
	release_0_2_0:1.31
	start:1.1.1.1
	NaCl:1.1.1;
locks; strict;
comment	@# @;


1.139
date	2002.10.25.03.31.58;	author shugo;	state Exp;
branches;
next	1.138;

1.138
date	2002.09.09.02.55.04;	author shugo;	state Exp;
branches;
next	1.137;

1.137
date	2002.09.05.04.34.25;	author shugo;	state Exp;
branches;
next	1.136;

1.136
date	2002.08.29.08.40.18;	author shugo;	state Exp;
branches;
next	1.135;

1.135
date	2002.08.29.04.58.01;	author shugo;	state Exp;
branches;
next	1.134;

1.134
date	2002.08.29.04.35.21;	author shugo;	state Exp;
branches;
next	1.133;

1.133
date	2002.08.23.03.07.53;	author shugo;	state Exp;
branches;
next	1.132;

1.132
date	2002.08.20.03.59.53;	author shugo;	state Exp;
branches
	1.132.2.1;
next	1.131;

1.131
date	2002.08.08.04.13.28;	author shugo;	state Exp;
branches;
next	1.130;

1.130
date	2002.07.11.03.46.37;	author shugo;	state Exp;
branches;
next	1.129;

1.129
date	2002.07.03.05.13.11;	author shugo;	state Exp;
branches;
next	1.128;

1.128
date	2002.07.02.05.21.21;	author shugo;	state Exp;
branches;
next	1.127;

1.127
date	2002.06.28.05.02.09;	author shugo;	state Exp;
branches;
next	1.126;

1.126
date	2002.06.18.08.47.45;	author shugo;	state Exp;
branches;
next	1.125;

1.125
date	2002.06.13.07.03.11;	author shugo;	state Exp;
branches;
next	1.124;

1.124
date	2002.06.11.04.23.57;	author shugo;	state Exp;
branches;
next	1.123;

1.123
date	2002.05.30.05.24.30;	author shugo;	state Exp;
branches;
next	1.122;

1.122
date	2002.05.28.07.19.00;	author shugo;	state Exp;
branches;
next	1.121;

1.121
date	2002.05.24.06.41.00;	author shugo;	state Exp;
branches;
next	1.120;

1.120
date	2002.05.21.05.58.35;	author shugo;	state Exp;
branches;
next	1.119;

1.119
date	2002.05.21.05.16.35;	author shugo;	state Exp;
branches;
next	1.118;

1.118
date	2002.05.21.04.59.21;	author shugo;	state Exp;
branches;
next	1.117;

1.117
date	2002.05.21.04.38.57;	author shugo;	state Exp;
branches;
next	1.116;

1.116
date	2002.05.16.05.16.39;	author shugo;	state Exp;
branches;
next	1.115;

1.115
date	2002.05.07.07.35.09;	author shugo;	state Exp;
branches;
next	1.114;

1.114
date	2002.05.07.05.27.55;	author shugo;	state Exp;
branches;
next	1.113;

1.113
date	2002.05.07.04.50.57;	author shugo;	state Exp;
branches;
next	1.112;

1.112
date	2002.04.30.05.51.05;	author shugo;	state Exp;
branches;
next	1.111;

1.111
date	2002.04.19.08.35.28;	author shugo;	state Exp;
branches;
next	1.110;

1.110
date	2002.04.04.06.18.34;	author shugo;	state Exp;
branches;
next	1.109;

1.109
date	2002.03.27.05.17.20;	author shugo;	state Exp;
branches;
next	1.108;

1.108
date	2002.03.12.07.58.07;	author shugo;	state Exp;
branches;
next	1.107;

1.107
date	2002.03.05.05.57.35;	author shugo;	state Exp;
branches;
next	1.106;

1.106
date	2002.03.04.07.36.57;	author shugo;	state Exp;
branches;
next	1.105;

1.105
date	2002.02.28.06.41.17;	author shugo;	state Exp;
branches;
next	1.104;

1.104
date	2002.02.15.06.06.16;	author shugo;	state Exp;
branches;
next	1.103;

1.103
date	2002.02.12.04.04.33;	author shugo;	state Exp;
branches;
next	1.102;

1.102
date	2002.01.30.08.42.34;	author shugo;	state Exp;
branches;
next	1.101;

1.101
date	2002.01.16.05.39.28;	author shugo;	state Exp;
branches;
next	1.100;

1.100
date	2002.01.07.09.14.13;	author shugo;	state Exp;
branches;
next	1.99;

1.99
date	2001.12.27.06.31.45;	author shugo;	state Exp;
branches;
next	1.98;

1.98
date	2001.12.17.07.31.43;	author shugo;	state Exp;
branches;
next	1.97;

1.97
date	2001.10.30.05.58.19;	author shugo;	state Exp;
branches;
next	1.96;

1.96
date	2001.10.17.06.03.54;	author shugo;	state Exp;
branches
	1.96.2.1;
next	1.95;

1.95
date	2001.10.15.03.27.46;	author shugo;	state Exp;
branches;
next	1.94;

1.94
date	2001.10.12.08.53.35;	author shugo;	state Exp;
branches;
next	1.93;

1.93
date	2001.10.12.03.36.36;	author shugo;	state Exp;
branches;
next	1.92;

1.92
date	2001.10.10.03.16.20;	author shugo;	state Exp;
branches;
next	1.91;

1.91
date	2001.10.04.09.19.38;	author shugo;	state Exp;
branches;
next	1.90;

1.90
date	2001.08.30.09.29.53;	author shugo;	state Exp;
branches;
next	1.89;

1.89
date	2001.08.24.02.25.05;	author shugo;	state Exp;
branches;
next	1.88;

1.88
date	2001.08.24.02.23.39;	author shugo;	state Exp;
branches;
next	1.87;

1.87
date	2001.08.13.02.27.17;	author shugo;	state Exp;
branches;
next	1.86;

1.86
date	2001.08.06.05.39.37;	author shugo;	state Exp;
branches;
next	1.85;

1.85
date	2001.08.06.05.14.57;	author shugo;	state Exp;
branches;
next	1.84;

1.84
date	2001.07.27.04.46.40;	author shugo;	state Exp;
branches;
next	1.83;

1.83
date	2001.07.23.02.18.16;	author shugo;	state Exp;
branches;
next	1.82;

1.82
date	2001.07.06.05.27.44;	author shugo;	state Exp;
branches;
next	1.81;

1.81
date	2001.07.02.06.27.04;	author shugo;	state Exp;
branches;
next	1.80;

1.80
date	2001.07.02.03.47.49;	author shugo;	state Exp;
branches;
next	1.79;

1.79
date	2001.06.29.07.09.14;	author shugo;	state Exp;
branches;
next	1.78;

1.78
date	2001.06.29.03.44.40;	author shugo;	state Exp;
branches;
next	1.77;

1.77
date	2001.06.28.08.57.29;	author shugo;	state Exp;
branches;
next	1.76;

1.76
date	2001.06.28.07.10.18;	author shugo;	state Exp;
branches;
next	1.75;

1.75
date	2001.06.27.03.49.56;	author shugo;	state Exp;
branches;
next	1.74;

1.74
date	2001.06.22.03.18.26;	author shugo;	state Exp;
branches;
next	1.73;

1.73
date	2001.06.21.09.42.14;	author shugo;	state Exp;
branches;
next	1.72;

1.72
date	2001.06.21.09.34.49;	author shugo;	state Exp;
branches;
next	1.71;

1.71
date	2001.06.21.07.50.33;	author shugo;	state Exp;
branches;
next	1.70;

1.70
date	2001.06.20.09.26.24;	author shugo;	state Exp;
branches;
next	1.69;

1.69
date	2001.06.11.02.14.15;	author shugo;	state Exp;
branches;
next	1.68;

1.68
date	2001.06.10.03.11.47;	author shugo;	state Exp;
branches;
next	1.67;

1.67
date	2001.06.09.09.50.27;	author shugo;	state Exp;
branches;
next	1.66;

1.66
date	2001.06.08.09.57.00;	author shugo;	state Exp;
branches;
next	1.65;

1.65
date	2001.06.08.08.02.01;	author shugo;	state Exp;
branches;
next	1.64;

1.64
date	2001.06.06.09.05.20;	author shugo;	state Exp;
branches;
next	1.63;

1.63
date	2001.06.06.08.54.33;	author shugo;	state Exp;
branches;
next	1.62;

1.62
date	2001.06.04.10.18.09;	author shugo;	state Exp;
branches;
next	1.61;

1.61
date	2001.06.04.03.07.20;	author shugo;	state Exp;
branches;
next	1.60;

1.60
date	2001.06.01.09.10.06;	author shugo;	state Exp;
branches;
next	1.59;

1.59
date	2001.05.29.04.36.58;	author shugo;	state Exp;
branches;
next	1.58;

1.58
date	2001.05.29.01.15.20;	author shugo;	state Exp;
branches;
next	1.57;

1.57
date	2001.05.28.08.35.27;	author shugo;	state Exp;
branches;
next	1.56;

1.56
date	2001.05.28.02.36.09;	author shugo;	state Exp;
branches;
next	1.55;

1.55
date	2001.05.25.19.15.11;	author shugo;	state Exp;
branches;
next	1.54;

1.54
date	2001.05.25.10.19.39;	author shugo;	state Exp;
branches;
next	1.53;

1.53
date	2001.05.18.07.46.25;	author shugo;	state Exp;
branches;
next	1.52;

1.52
date	2001.05.18.07.18.38;	author shugo;	state Exp;
branches;
next	1.51;

1.51
date	2001.05.02.08.45.26;	author shugo;	state Exp;
branches;
next	1.50;

1.50
date	2001.04.27.09.24.28;	author shugo;	state Exp;
branches;
next	1.49;

1.49
date	2001.04.27.04.51.59;	author shugo;	state Exp;
branches;
next	1.48;

1.48
date	2001.04.20.04.08.56;	author shugo;	state Exp;
branches;
next	1.47;

1.47
date	2001.04.19.06.13.25;	author shugo;	state Exp;
branches;
next	1.46;

1.46
date	2001.04.13.04.19.40;	author shugo;	state Exp;
branches;
next	1.45;

1.45
date	2001.04.12.09.08.34;	author shugo;	state Exp;
branches;
next	1.44;

1.44
date	2001.04.10.09.12.22;	author shugo;	state Exp;
branches;
next	1.43;

1.43
date	2001.04.10.08.03.55;	author shugo;	state Exp;
branches;
next	1.42;

1.42
date	2001.04.09.03.55.26;	author shugo;	state Exp;
branches;
next	1.41;

1.41
date	2001.03.05.02.06.35;	author shugo;	state Exp;
branches;
next	1.40;

1.40
date	2001.01.24.07.54.36;	author shugo;	state Exp;
branches;
next	1.39;

1.39
date	2000.12.12.05.41.07;	author shugo;	state Exp;
branches;
next	1.38;

1.38
date	2000.12.06.05.37.07;	author shugo;	state Exp;
branches;
next	1.37;

1.37
date	2000.11.23.09.26.14;	author shugo;	state Exp;
branches;
next	1.36;

1.36
date	2000.11.23.09.25.05;	author shugo;	state Exp;
branches;
next	1.35;

1.35
date	2000.10.16.09.27.57;	author shugo;	state Exp;
branches;
next	1.34;

1.34
date	2000.10.14.14.55.40;	author shugo;	state Exp;
branches;
next	1.33;

1.33
date	2000.10.14.04.27.56;	author shugo;	state Exp;
branches;
next	1.32;

1.32
date	2000.10.04.15.38.45;	author shugo;	state Exp;
branches;
next	1.31;

1.31
date	2000.09.11.07.06.54;	author shugo;	state Exp;
branches;
next	1.30;

1.30
date	2000.09.11.06.56.33;	author shugo;	state Exp;
branches;
next	1.29;

1.29
date	2000.09.06.10.03.37;	author shugo;	state Exp;
branches;
next	1.28;

1.28
date	2000.08.31.02.52.54;	author shugo;	state Exp;
branches;
next	1.27;

1.27
date	2000.08.25.07.42.06;	author shugo;	state Exp;
branches;
next	1.26;

1.26
date	2000.08.03.07.29.40;	author shugo;	state Exp;
branches;
next	1.25;

1.25
date	2000.08.02.07.01.45;	author shugo;	state Exp;
branches;
next	1.24;

1.24
date	2000.08.02.06.12.33;	author shugo;	state Exp;
branches;
next	1.23;

1.23
date	2000.08.02.05.14.54;	author shugo;	state Exp;
branches;
next	1.22;

1.22
date	2000.08.01.00.56.56;	author shugo;	state Exp;
branches;
next	1.21;

1.21
date	2000.07.13.03.31.04;	author shugo;	state Exp;
branches;
next	1.20;

1.20
date	2000.06.26.01.19.37;	author shugo;	state Exp;
branches;
next	1.19;

1.19
date	2000.06.14.03.27.33;	author shugo;	state Exp;
branches;
next	1.18;

1.18
date	2000.05.24.04.59.00;	author shugo;	state Exp;
branches;
next	1.17;

1.17
date	2000.05.18.08.47.41;	author shugo;	state Exp;
branches;
next	1.16;

1.16
date	2000.05.18.08.09.41;	author shugo;	state Exp;
branches;
next	1.15;

1.15
date	2000.04.05.08.13.52;	author shugo;	state Exp;
branches;
next	1.14;

1.14
date	2000.03.30.08.08.11;	author shugo;	state Exp;
branches;
next	1.13;

1.13
date	2000.03.28.05.41.57;	author shugo;	state Exp;
branches;
next	1.12;

1.12
date	99.08.12.02.48.51;	author shugo;	state Exp;
branches;
next	1.11;

1.11
date	99.08.10.06.37.51;	author shugo;	state Exp;
branches;
next	1.10;

1.10
date	99.07.26.01.31.18;	author shugo;	state Exp;
branches;
next	1.9;

1.9
date	99.07.15.06.06.08;	author shugo;	state Exp;
branches;
next	1.8;

1.8
date	99.07.09.10.20.47;	author shugo;	state Exp;
branches;
next	1.7;

1.7
date	99.07.09.04.30.35;	author shugo;	state Exp;
branches;
next	1.6;

1.6
date	99.07.06.09.36.53;	author shugo;	state Exp;
branches;
next	1.5;

1.5
date	99.06.21.07.19.15;	author shugo;	state Exp;
branches;
next	1.4;

1.4
date	99.06.01.07.06.08;	author shugo;	state Exp;
branches;
next	1.3;

1.3
date	99.05.21.06.48.04;	author shugo;	state Exp;
branches;
next	1.2;

1.2
date	99.05.20.05.36.17;	author shugo;	state Exp;
branches;
next	1.1;

1.1
date	99.04.20.08.41.05;	author shugo;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.04.20.08.41.05;	author shugo;	state Exp;
branches;
next	;

1.96.2.1
date	2001.10.30.06.02.53;	author shugo;	state Exp;
branches;
next	;

1.132.2.1
date	2002.08.23.03.12.57;	author shugo;	state Exp;
branches;
next	1.132.2.2;

1.132.2.2
date	2002.08.29.04.39.40;	author shugo;	state Exp;
branches;
next	1.132.2.3;

1.132.2.3
date	2002.09.05.04.30.27;	author shugo;	state Exp;
branches;
next	1.132.2.4;

1.132.2.4
date	2002.10.25.03.29.26;	author shugo;	state Exp;
branches;
next	1.132.2.5;

1.132.2.5
date	2002.10.29.02.46.22;	author shugo;	state Exp;
branches;
next	;


desc
@@


1.139
log
@* request.c (request_set_args): new method.
@
text
@Fri Oct 25 12:21:07 2002  Shugo Maeda <shugo@@modruby.net>
	
	* request.c (request_set_args): new method.

Mon Sep  9 11:54:08 2002  Tietew <tietew@@tietew.net>

	* lib/auto-reload.rb (require): fixed reversed condition.

Thu Sep  5 13:29:00 2002  GOTOU Yuuzou <gotoyuzo@@notwork.org>

	* request.c: handle apr_time_t correctly.

Thu Aug 29 17:38:22 2002  Tietew <tietew@@tietew.net>

	* lib/auto-reload.rb (require): avoid endless recursion.

Thu Aug 29 13:56:32 2002  Tietew <tietew@@tietew.net>

	* lib/auto-reload.rb (require): check the dependency of libraries.

Thu Aug 29 13:30:40 2002  Shugo Maeda <shugo@@modruby.net>
	
	* lib/apache/eruby-run.rb (postrun): do not overwrite r.content_type.

Fri Aug 23 12:06:53 2002  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c: RubyTransHandler and RubyPostReadRequestHandler
	are allowed only globally or in <VirtualHost> now.
	Thanks, Eugene Scripnik <Eugene.Scripnik@@itgrp.net>.

Fri Aug 23 12:02:11 2002  Eugene Scripnik <Eugene.Scripnik@@itgrp.net>
	
	* lib/auto-reload.rb (require): fix for the behaviour of nil on
<	ruby-1.7.2.

Tue Aug 20 12:56:25 2002  Shugo Maeda <shugo@@modruby.net>

	* version 1.0.0 released.

Thu Aug  8 13:12:21 2002  Shugo Maeda <shugo@@modruby.net>

	* ruby_config.c (ruby_cmd_safe_level): RubySafeLevel on the top
	level of httpd.conf can set $SAFE to 0 now.

Thu Jul 11 12:44:32 2002  Shugo Maeda <shugo@@modruby.net>

	* lib/apache/eruby-run.rb (handler): send http header even if
	Kernel#exit is called from eRuby scripts.

	* lib/apache/eruby-debug.rb (run): ditto.

Wed Jul  3 14:11:22 2002  Sean Chittenden <sean@@ruby-lang.org>

	* server.c (server_log_emerge): new method.

	* server.c (server_log_alert): ditto.

	* server.c (server_log_crit): ditto.

	* server.c (server_log_info): ditto.

Tue Jul  2 14:19:37 2002  Shugo Maeda <shugo@@modruby.net>

	* lib/apache/ruby-debug.rb (handler): do not catch SystemExit.

	* lib/apache/eruby-debug.rb (run): ditto.

Fri Jun 28 14:01:08 2002  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (ruby_require): do not require doubly.

Tue Jun 18 17:46:33 2002  Shugo Maeda <shugo@@modruby.net>

	* configure.rb.in: cause error if both --with-apache and
	--with-apxs specified.

	* configure.rb.in: cause error if --with-apache is specified for
	Apache2.

Thu Jun 13 15:54:35 2002  Takeshi Komiya <katsuwo@@ish.ic.kanagawa-it.ac.jp>

	* lib/apache/ruby-debug.rb: use ERubyDebug like HTML.

	* lib/apache/eruby-debug.rb: change title and delete a comment.

Tue Jun 11 13:23:20 2002  Shugo Maeda <shugo@@modruby.net>

	* version 0.9.9 released.

Thu May 30 14:23:00 2002  Takeshi Komiya <katsuwo@@ish.ic.kanagawa-it.ac.jp>

	* lib/apache/eruby-debug.rb: new module to debug eRuby scripts.

Tue May 28 14:50:37 2002  WATANABE Hirofumi <eban@@os.rim.or.jp>

	* configure.rb.in: fix for cygwin.

Fri May 24 15:39:03 2002  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (ruby_startup): remove already require libraries from
	conf->load_path.

Tue May 21 14:51:35 2002  Shugo Maeda <shugo@@modruby.net>

	* ruby_config.c (ruby_cmd_require): fixed the third argument of
	ap_make_array().

	* ruby_config.c (ruby_merge_server_config): new function.

Tue May 21 14:15:27 2002  Shugo Maeda <shugo@@modruby.net>

	* ruby_config.c (ruby_cmd_require): push ruby_server_config* and
	ruby_dir_config* to ruby_required_libraries.

Tue May 21 13:57:42 2002  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (ruby_require): takes ruby_server_config* and
	ruby_dir_config* as arguments to setup the load path.

Tue May 21 12:25:35 2002  Shugo Maeda <shugo@@modruby.net>

	* apachelib.c (apache_server_root): moved from
	request.c:request_server_root().

	* request.c (request_proxy_q): fix for Apache2.

	* request.c (request_proxy_pass_q): ditto.

	* request.c (request_lookup_uri): ditto.

	* request.c (request_lookup_file): ditto.

Tue May 21 11:57:01 2002  Sean Chittenden <sean@@chittenden.org>

	* request.c (request_server_root): new method.

	* request.c (request_get_dispatch_handler): ditto.

	* request.c (request_set_dispatch_handler): ditto.

	* request.c (request_proxy_q): ditto.

	* request.c (request_proxy_pass_q): ditto.

	* request.c (request_get_cache_resp): ditto.

	* request.c (request_set_cache_resp): ditto.

	* request.c (request_get_cache_resp): ditto.

	* request.c (request_lookup_uri): ditto.

	* request.c (request_lookup_file): ditto.

Thu May 16 14:15:49 2002  Sean Chittenden <sean@@chittenden.org>

	* mod_ruby.c (per_request_init): use sconf->load_path.

Thu May 16 14:14:54 2002  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (ruby_require): call require method.

Tue May  7 16:33:55 2002  Shugo Maeda <shugo@@modruby.net>

	* table.c (table_set): use ap_pstrndup().

	* table.c (table_merge): ditto.

	* table.c (table_add): ditto.

Tue May  7 14:27:27 2002  Shugo Maeda <shugo@@modruby.net>

	* Makefile.in: added datadir.

	* configure.rb: added datadir support.

Tue May  7 13:48:50 2002  Sean Chittenden <sean@@chittenden.org>

	* request.c (request_remote_host): takes an optional argument.

	* apachelib.c: added some constants such as Apache::REMOTE_HOST.

Tue Apr 30 14:44:00 2002  Sean Chittenden <sean@@chittenden.org>

	* mod_ruby.h: Moved several define's from mod_ruby.c.

	* mod_ruby.c (per_request_cleanup): fixed SEGV for internal
	subrequest clean up.

	* request.c (request_last) new method.

	* request.c (request_internal_redirect) ditto.

	* request.c (request_custom_response) ditto.

	* request.c (request_is_main) ditto.

	* request.c (request_is_initial) ditto.

	* request.c (request_bytes_sent) ditto.

	* request.c (request_send_fd) ditto.

Fri Apr 19 17:34:28 2002  Shugo Maeda <shugo@@modruby.net>

	* version 0.9.8 released.

Thu Apr  4 15:16:34 2002  Sean Chittenden <sean@@chittenden.org>

	* lib/apache/eruby-run.rb: do not send header on sync mode.

	* lib/apache/erb-run.rb: ditto.

Wed Mar 27 14:12:21 2002  Shugo Maeda <shugo@@modruby.net>

	* request.c (request_set_user): new method.

	* request.c (request_set_auth_type): ditto.

	* request.c (request_set_auth_name): ditto.

	* connection.c (connection_set_user): ditto.

	* connection.c (connection_set_auth_type): ditto.

	* connection.c (connection_remote_port): fix for Apache2.

	* connection.c (connection_local_port): ditto.

Sun Mar 24 22:57:43 2002  Sean Chittenden <sean@@chittenden.org>

	* connection.c (connection_remote_port): new method.

	* connection.c (connection_local_port): ditto.

Tue Mar 12 16:57:09 2002  Shugo Maeda <shugo@@modruby.net>

	* doc: added documents.

Tue Mar  5 14:56:14 2002  Shugo Maeda <shugo@@modruby.net>

        * supports Apache 2.0.

Sun Mar  3 00:34:56 2002  Shugo Maeda <shugo@@modruby.net>

	* table.c (table_setn): removed.

	* table.c (table_mergen): ditto.

	* table.c (table_addn): ditto.

Thu Feb 28 15:30:06 2002  Shugo Maeda <shugo@@modruby.net>

	* ruby_config.c (ruby_cmd_add_path): allow RubyAddPath in
	.htaccess.

Fri Feb 15 15:01:40 2002  Shugo Maeda <shugo@@modruby.net>

	* request.c (request_get_allowed): new method.

	* request.c (request_set_allowed): ditto.

Tue Feb 12 13:00:01 2002  Shugo Maeda <shugo@@modruby.net>

	* version 0.9.7 released.

Tue Feb 12 12:59:21 2002  Shugo Maeda <shugo@@modruby.net>

	* lib/apache/ruby-run.rb (handler): return DECLINED for OPTIONS
	requests.

	* lib/apache/eruby-run.rb (handler): ditto.

	* lib/apache/erb-run.rb (handler): ditto.

	* lib/apache/ruby-debug.rb (handler): ditto.

	* lib/apache/rd2html.rb (handler): ditto.

Wed Jan 30 17:41:47 2002  Shugo Maeda <shugo@@modruby.net>

	* version 0.9.6 released.

Wed Jan 30 17:34:01 2002  Shugo Maeda <shugo@@modruby.net>

	* lib/apache/ruby-debug.rb: new file.

Wed Jan 23 17:51:05 2002  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (ruby_cleanup): call ruby_finalize().

	* mod_ruby.c (ruby_child_init): new function to initialize child
	processes.

	* mod_ruby.c (ruby_child_cleanup): new function to cleanup child
	processes.

	* request.c (request_notes): new method.

Wed Jan 16 14:02:51 2002  Shugo Maeda <shugo@@modruby.net>

	* apachelib.h (CSTR2OBJ): use rb_tainted_str_new2().

	* array_header.c: ditto.

	* table.c: ditto.

	* server.c: ditto.

	* lib/apache/ruby-run.rb: use untaint.

	* lib/apache/eruby-run.rb: ditto.

	* lib/apache/erb-run.rb: ditto.

	* lib/apache/rd2html.rb: ditto.

Mon Jan  7 18:08:09 2002  U.Nakamura <usa@@osb.att.ne.jp>

	* Makefile.in (install-ruby): lib/$$file -> $(srcdir)/lib/$$file.

	* Makefile.in (install-siteruby): ditto.

Thu Dec 27 15:27:02 2001  Shugo Maeda <shugo@@modruby.net>

	* version 0.9.5 released.

Mon Dec 17 16:29:30 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (ruby_startup): save Apache's signal handlers.

Tue Oct 30 14:56:22 2001  Neil Conway <nconway@@klamath.dyndns.org>

	* connection.c (connection_aborted): new method.

Wed Oct 17 15:03:34 2001  Shugo Maeda <shugo@@modruby.net>

	* version 0.9.4 released.

Mon Oct 15 12:25:28 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (ruby_startup): call Init_stack().

	* request.c (cleanup_request_object): free RDATA(reqobj)->data.

	* request.c (request_headers_in): allow non-auth handlers to
	access Authorization header fields.

	* request.c (request_get_basic_auth_pw): allow non-auth handlers.

Fri Oct 12 17:48:57 2001  Shugo Maeda <shugo@@modruby.net>

	* apachelib.h (DEFINE_ATTR_READER): raise exception if data == NULL.

	* apachelib.h (DEFINE_ATTR_WRITER): ditto.

	* mod_ruby.c (per_request_cleanup): set r->main to rb_request if r
	is a sub_request.

	* request.c (request_mark): return immediately if data == NULL.

Fri Oct 12 12:35:12 2001  Miles Egan <miles@@pixar.com>

	* configure.rb.in: chomp output of apxs.

Wed Oct 10 12:15:16 2001  Shugo Maeda <shugo@@modruby.net>

	* ruby_config.c (ruby_cmd_output_mode): new directive RubyOutputMode.

	* request.c (apache_request_new): save request objects to
	r->request_config.

	* request.c (cleanup_request_object): new function.

Thu Aug 30 18:28:46 2001 Sean Chittenden <sean-apache-modruby@@chittenden.org>

	* request.c (rb_apache_request_flush): call ap_rflush().

	* request.c: allow the path_info for the request to be changed.

Fri Aug 24 11:24:38 2001  Shugo Maeda <shugo@@modruby.net>

	* version 0.9.3 released.

Fri Aug 24 11:20:56 2001  Shugo Maeda <shugo@@modruby.net>

	* lib/apache/eruby-run.rb (postrun): do not overwrite r.content_type.

Thu Aug 23 19:59:41 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (ruby_require): handle SystemExit correctly.

Mon Aug 20 15:22:10 2001  Shugo Maeda <shugo@@modruby.net>

	* request.c (request_method_number): new method.

	* apachelib.c: new constants M_GET, M_PUT, ....

Tue Aug 14 14:58:56 2001  Shugo Maeda <shugo@@modruby.net>

	* configure.rb: rebuild with autoconf.rb 0.2.3 for Solaris.

Mon Aug 13 11:25:13 2001  Shugo Maeda <shugo@@modruby.net>

	* version 0.9.2 released.

Sun Aug 12 18:19:51 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (ruby_require): initialize $:.

Mon Aug  6 14:38:39 2001  Shugo Maeda <shugo@@modruby.net>

	* version 0.9.1 released.

Mon Aug  6 14:36:20 2001  Shugo Maeda <shugo@@modruby.net>

	* changed license for Apache.

Mon Aug  6 14:09:20 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (ruby_handler): flush rb_request only in RubyHandler.

	* server.c (server_document_root): new method.
	Thanks to Sean Chittenden.

Sat Jul 28 19:16:44 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (ruby_trans_handler): renamed translate_uri2file to
	translate_uri.

Fri Jul 27 13:44:14 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (per_request_cleanup): do not restore rb_stdout.

Mon Jul 23 11:16:05 2001  Aristarkh A Zagorodnikov <xm@@w3d.ru>

	* request.c (request_the_request): new method.

Fri Jul  6 14:26:34 2001  Shugo Maeda <shugo@@modruby.net>

	* version 0.9.0 released.

Mon Jul  2 15:26:47 2001  Shugo Maeda <shugo@@modruby.net>

	* request.c (request_sent_http_header): new method.

Mon Jul  2 12:42:54 2001  Shugo Maeda <shugo@@modruby.net>

	* request.c (request_set_content_type): accept nil.

	* request.c (request_set_content_encoding): ditto.

	* request.c (request_set_content_languages): ditto.

Fri Jun 29 16:05:06 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (per_request_init): set rb_stdin, rb_stdout,
	rb_defout to rb_request.

	* mod_ruby.c (per_request_cleanup): flush rb_request.

	* request.c (request_output_buffer): new method.

	* lib/apache/cgi-support.rb: removed.

	* lib/apache/eruby-run.rb: use tempfile.

	* lib/apache/erb-run.rb: ditto.

Thu Jun 28 16:09:47 2001  Shugo Maeda <shugo@@modruby.net>

	* version 0.8.5 released.

Thu Jun 28 16:08:44 2001  Shugo Maeda <shugo@@modruby.net>

	* request.c (read_client_block): read all data.

Wed Jun 27 12:44:24 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (per_request_init): recycle rb_request.

	* request.c: removed notes from struct request_data.

	* request.c (rb_apache_request_flush): flush only once.

	* request.c (request_to_s): removed.

Fri Jun 22 12:14:14 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (load_eruby_script): don't use print_error().

	* mod_ruby.c (ruby_handler): multi-handler support.

	* ruby_config.c (ruby_cmd_post_read_request_handler): new handler.

	* ruby_config.c (ruby_cmd_init_handler): ditto.

	* ruby_config.c (ruby_cmd_cleanup_handler): ditto.

Thu Jun 21 18:40:44 2001  Shugo Maeda <shugo@@modruby.net>

	* lib/apache/eruby-run.rb: don't check ExecCGI.

	* lib/apache/erb-run.rb: ditto.

Thu Jun 21 18:31:05 2001  Shugo Maeda <shugo@@modruby.net>

	* ruby_config.c (ruby_cmd_require): use ruby_required_libraries
	for virtual hosts.

	* lib/apache/erb-run.rb: no need to inherit Apache::RubyRun.

Thu Jun 21 15:35:01 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (ruby_startup): removed RUBY_RELEASE_DATE from
	version	component.

	* mod_ruby.c (ruby_startup): log error if ruby_require() fails.

	* mod_ruby.c (ruby_handler): don't call rb_apache_request_flush()
	on error.

	* request.c (rb_apache_request_new): should initialize data->server.

	* lib/apache/ruby-run.rb (handler): require ExecCGI and exec
	permission.

	* lib/apache/eruby-run.rb (handler): require ExecCGI.

	* lib/apache/cgi-support.rb: new file.

	* lib/apache/erb-run.rb: new file, supports ERb.

Wed Jun 20 18:23:13 2001  Shugo Maeda <shugo@@modruby.net>

	* version 0.8.4 released.

Wed Jun 20 18:08:50 2001  Shugo Maeda <shugo@@modruby.net>

	* Makefile.in: new targets (tag, dist).

Mon Jun 11 11:12:57 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (ruby_handler_0): handle SystemExit correctly.

	* array_header.c (array_length): new method.

	* table.c: renamed ApacheInTable to ApacheRestrictedTable.

	* request.c (rb_apache_request_new): don't set content_type.

	* request.c (request_headers_in): return non-restricted table for
	RubyAuthenHandler.

	* request.c (request_notes): removed.

	* request.c (request_allow_options): new method.

	* request.c (request_allow_overrides): ditto.

	* request.c (request_default_type): ditto.

	* request.c (request_construct_url): ditto.

	* request.c (request_auth_type): ditto.

	* request.c (request_auth_name): ditto.

	* request.c (request_satisfies): ditto.

	* request.c (request_requires): ditto.

	* request.c (request_note_auth_failure): ditto.

	* request.c (request_note_basic_auth_failure): ditto.

	* request.c (request_note_digest_auth_failure): ditto.

	* request.c (request_basic_auth_pw): ditto.

Sun Jun 10 01:23:53 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (ruby_trans_handler): new handler.

	* mod_ruby.c (ruby_authen_handler): ditto.

	* mod_ruby.c (ruby_authz_handler): ditto.

	* mod_ruby.c (ruby_access_handler): ditto.

	* mod_ruby.c (ruby_type_handler): ditto.

	* mod_ruby.c (ruby_fixup_handler): ditto.

	* mod_ruby.c (ruby_log_handler): ditto.

	* mod_ruby.c (ruby_header_parser_handler): ditto.

Sat Jun  9 18:47:13 2001  Shugo Maeda <shugo@@modruby.net>

	* configure.rb.in: check for gcc.

	* mod_ruby.c (ruby_object_handler_0): call log_error().

	* lib/apache/eruby-run.rb (handler): set @@compiler.sourcefile.

Fri Jun  8 18:02:57 2001  Shugo Maeda <shugo@@modruby.net>

	* Makefile.in: libruby.a support.

	* configure.rb.in: ditto.

	* configure.rb: generated by autoconf.rb version 0.2.

	* mod_ruby.c (get_exception_info): don't use str2cstr macro for
	Ruby 1.7.

	* mod_ruby.c (protect_funcall0): changed type of argument to
	VALUE.

	* mod_ruby.c (ruby_require): cast rb_require to VALUE (*)(VALUE).

Fri Jun  8 17:00:32 2001  Shugo Maeda <shugo@@modruby.net>

	* examples/httpd.conf: changed the example of Apache's LIBEXECDIR
	to /usr/local/apache/libexec.

Wed Jun  6 18:04:14 2001  Shugo Maeda <shugo@@modruby.net>

	* version 0.8.3 released.

Wed Jun  6 17:53:56 2001  Shugo Maeda <shugo@@modruby.net>

	* request.c (request_escape_html): add taint status infection.

	* mod_ruby.c (ruby_object_handler): call rb_exec_end_proc().

Mon Jun  4 19:16:45 2001  Shugo Maeda <shugo@@modruby.net>

	* version 0.8.2 released.

Mon Jun  4 12:07:02 2001  Shugo Maeda <shugo@@modruby.net>

	* lib/auto-reload: new file.

	* lib/apache/ruby-run.rb: renamed from ruby/apache/ruby.rb.

	* lib/apache/eruby-run.rb: renamed from ruby/apache/eruby.rb.

	* lib/apache/rd2html.rb: renamed from ruby/apache/rd2html.rb.

	* lib/apache/eruby-run.rb (handler): specify filename for backtrace.

Sat Jun  2 21:40:53 2001  Shugo Maeda <shugo@@modruby.net>

	* changed license from GPL to LGPL.

	* COPYING: new file.

Fri Jun  1 18:08:21 2001  Shugo Maeda <shugo@@modruby.net>

	* configure.rb.in: exit if fail to exec apxs.

Tue May 29 13:36:20 2001  Shugo Maeda <shugo@@modruby.net>

	* configure.rb.in: removed -mwin32 hack.

Tue May 29 10:14:39 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c: don't include config.h.

Mon May 28 17:34:39 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c: hack for cygwin.

	* configure.rb.in: ditto.

Mon May 28 11:35:46 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (ruby_startup): don't initialize ruby if
	ruby_running(). (for static Apache module)

	* mod_ruby.c: use EXTERN.

	* libruby.module.in: use MODULE_LIBS to expand LIBRUBYARG.

	* configure.rb.in: set $ERUBY_INCLUDES instead of modify $CFLAGS.

	* Makefile.in: RUBY_SO_NAME for cygwin.

Sat May 26 04:11:21 2001  Shugo Maeda <shugo@@modruby.net>

	* install-rb: new file.

	* Makefile.in: change owner and group of $(APACHE_SRCDIR)/
	src/modules/ruby/*.

Fri May 25 19:15:39 2001  Shugo Maeda <shugo@@modruby.net>

	* Makefile.in: static Apache module support..

	* configure.rb.in: new file.

	* Makefile.tmpl: new file.

	* Makefile.libdir: new file.

	* libruby.module.in: new file.

	* ruby_shared_stub.c: new file.

Fri May 18 16:45:46 2001  Shugo Maeda <shugo@@modruby.net>

	* Makefile.RB: removed.

Fri May 18 16:18:20 2001  Shugo Maeda <shugo@@modruby.net>

	* ruby/apache/eruby.rb: do not require "cgi/session".

	* configure.rb: new file.

	* Makefile.in: new file.

Wed May  2 17:44:45 2001  Shugo Maeda <shugo@@modruby.net>

	* fixed copyright notice.

	* array_header.c: new file for Apache::ArrayHeader.

	* server.c: added some methods.

Fri Apr 27 18:23:44 2001  Shugo Maeda <shugo@@modruby.net>

	* version 0.8.1 released.
	
Fri Apr 27 13:50:29 2001  Shugo Maeda <shugo@@modruby.net>
	
	* ruby/apache/ruby.rb (emulate_cgi): new method.

	* ruby/apache/eruby.rb: inherit Apache::Ruby.

Thu Apr 26 17:41:11 2001  Shugo Maeda <shugo@@modruby.net>

	* table.c: new file for Apache::Table.

	* connection.c: new file for Apache::Connection.

	* server.c: new file for Apache::Server.

	* request.c: new file for Apache::Request.

	* request.c (request_setup_cgi_env): new method.

	* mod_ruby.c (script_handler): resotre original $stdin, $stdout
	and $>.

Fri Apr 20 13:04:28 2001  Shugo Maeda <shugo@@modruby.net>

	* apachelib.c (request_finfo): new method Apache::Request#finfo.

	* mod_ruby.c (load_eruby_script): supports eruby-0.9.0.

	* ruby/apache/eruby.rb: new handler Apache::ERuby.

Thu Apr 19 15:09:58 2001  Shugo Maeda <shugo@@modruby.net>

	* ruby/apache/ruby.rb: new handler Apache::Ruby.

	* ruby/apache/rd2html.rb: renamed from mod_rd2html.rb.

Mon Apr 15 20:37:41 2001  Shugo Maeda <shugo@@modruby.net>

	* apachelib.c (request_read): do not use buffer.

	* apachelib.c (ruby_init_apachelib): remove methods from
	Apache::request. (gets, readline, readlines, each, getc,
	readchar, ungetc, tell, seek, rewind, pos, pos=)

	* apachelib.c (ruby_init_apachelib): new class Apache::Server.

Fri Apr 13 13:16:58 2001  Shugo Maeda <shugo@@modruby.net>

	* version 0.8.0 released.

Fri Apr 13 12:18:12 2001  Shugo Maeda <shugo@@modruby.net>

	* examples/httpd.conf: example of httpd.conf.

	* ruby/mod_rd2html.rb: RD2HTML module.

	* apachelib.c (ruby_request_outbuf_length): return long.

	* apachelib.c (apache_add_version_component): new method.

	* apachelib.c (connection_auth_type): new method.

	* apachelib.c (request_protocol): new method.

	* apachelib.c (request_subprocess_env): new method.

	* apachelib.c (request_remote_host): new method.

	* apachelib.c (request_remote_logname): new method.

	* apachelib.c (request_server_name): new method.

	* apachelib.c (request_server_port): new method.

	* apachelib.c (request_signature): new method.

	* apachelib.c (reset_timeout): new method.

	* apachelib.c (hard_timeout): new method.

	* apachelib.c (soft_timeout): new method.

	* apachelib.c (kill_timeout): new method.

	* apachelib.c (add_common_vars): new method.

	* apachelib.c (add_cgi_vars): new method.

Thu Apr 12 17:53:24 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (run_safely): call rb_thread_stop_timer() for
	FreeBSD.

	* mod_ruby (script_handler): use run_safely(). do not call
	rb_gc().

	* apachelib.c (ruby_create_request): delay creation of
	Apache::Connection, Apache::Table....

	* ruby_config.c (ruby_cmd_safe_level): RubySafeLevel is now
	per-directory.

Tue Apr 10 18:10:59 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (run_safely_0): call ruby_log_error() on error.

Tue Apr 10 16:52:47 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (ruby_object_handler): new handler.

	* ruby_config.c (ruby_cmd_add_path): new directive.

	* apachelib.c (ruby_create_request): new argument input.

	* apachelib.c (ruby_init_apachelib): new constants such as Apache::OK.

Mon Apr  9 12:54:18 2001  Shugo Maeda <shugo@@modruby.net>

	* apachelib.c (ruby_create_request): remove cast.

Tue Feb 27 10:56:24 2001  Colin Steele <colin@@webg2.com>

	* apachelib.c (request_status): new method.

	* apachelib.c (request_set_status): new method.

Wed Jan 24 16:52:48 2001  Shugo Maeda <shugo@@modruby.net>

	* apachelib.c (ruby_init_apachelib): fixed Apache::InTable#[].

Tue Dec 12 14:40:19 2000  Shugo Maeda <shugo@@modruby.net>

	* version 0.2.2 released.

Tue Dec 12 14:35:30 2000  Shugo Maeda <shugo@@modruby.net>

	* apachelib.c: some methods of Apache::Request are obsolete now.

Wed Dec  6 14:35:37 2000  Shugo Maeda <shugo@@ruby-lang.org>

	* mod_ruby.c (ruby_startup): get correct RUBY_VERSION.

Thu Nov 23 18:22:30 2000  Shugo Maeda <shugo@@ruby-lang.org>

	* ruby_config.c (ruby_cmd_safe_level): new directive.

Mon Oct 16 18:27:36 2000  Shugo Maeda <shugo@@ruby-lang.org>

	* version 0.2.1 released.

Sat Oct 14 14:19:04 2000  Shugo Maeda <shugo@@ruby-lang.org>

	* apachelib.c (request_binmode): new method.

	* mod_ruby.c (get_exception_info): bug fix.

Sat Oct 14 12:48:11 2000  Shugo Maeda <shugo@@ruby-lang.org>

	* apachelib.c (ruby_init_apachelib): added input methods.

	* mod_ruby.c (ruby_handler0) : use Apache::Request for $stdin.

Mon Oct  2 23:32:17 2000  Shugo Maeda <shugo@@ruby-lang.org>

	* mod_ruby.c (ruby_handler0): kill all threads on exit.

	* changed copyright.

Mon Sep 11 16:06:25 2000  Shugo Maeda <shugo@@ruby-lang.org>

	* version 0.2.0 released.

Mon Sep 11 15:55:40 2000  Shugo Maeda <shugo@@ruby-lang.org>

	* mod_ruby.c (ruby_startup): call ruby_init_loadpath().

Wed Sep  6 19:02:32 2000  Shugo Maeda <shugo@@ruby-lang.org>

	* mod_ruby.c (load_eruby_charset): use eruby_default_charset
	instead of ERUBY_DEFAULT_CHARSET.

Thu Aug 31 11:48:43 2000  Shugo Maeda <shugo@@ruby-lang.org>

	* Makefile.RB: new option --enable-eruby, --eruby-includes,
	--eruby-libraries.

	* eruby.h: removed.

	* eruby.c: removed.

Fri Aug 25 16:39:05 2000  Shugo Maeda <shugo@@ruby-lang.org>

	* version 0.1.9 released.

Thu Aug  3 15:53:11 2000  Shugo Maeda <shugo@@ruby-lang.org>

	* apachelib.c (ruby_init_apachelib): new class Apache::Table

Wed Aug  2 15:09:54 2000  Shugo Maeda <shugo@@ruby-lang.org>

	* mod_ruby.c (ruby_init): add "." to the load path.

	* mod_ruby.c (ruby_handler0): reset the load path.

Tue Aug  1 09:55:07 2000  Shugo Maeda <shugo@@ruby-lang.org>

	* mod_ruby.c (load_eruby_script): don't override Content-Type.

Thu Jul 13 12:25:34 2000  Shugo Maeda <shugo@@ruby-lang.org>

	* Makefile.RB: expand CONFIG["LIBRUBYARG"] for ruby-1.5.

	* mod_ruby.c (ruby_handler0): use /dev/null instead of an original
	stdin for apache -X.

Wed Jun 14 13:11:48 2000  Shugo Maeda <shugo@@netlab.co.jp>

	* apachelib.c (request_aref): don't call STR2CSTR() with
	char* argument.

	* mod_ruby.c (ruby_handler0): call stdin_reopen().

Tue May 30 11:29:45 2000  Katsuyuki Komatsu <komatsu@@sarion.co.jp>

	* eruby.c: define S_ISDIR and W_OK.

Wed May 24 13:53:25 2000  Shugo Maeda <shugo@@netlab.co.jp>

	* version 0.1.8 released.

Wed May 24 13:52:48 2000  Shugo Maeda <shugo@@netlab.co.jp>

	* mod_ruby.c (load_eruby_script): set eruby_noheader to 0.

Wed May 24 12:39:43 2000  Shugo Maeda <shugo@@netlab.co.jp>

	* apachelib.c (request_get_sync): removed.

	* apachelib.c (request_set_sync): removed.

	* apachelib.c (rb_request_flush): do not send body if
	data->request->header_only is non-zero.

Thu May 18 17:43:42 2000  Shugo Maeda <shugo@@netlab.co.jp>

	* apachelib.c (ruby_create_request): cast request_mark to
	void (*) _((void*)).

	* apachelib.c (request_content_length): use rb_cstr2inum()
	if RUBY_VERSION_CODE >= 150.

Thu May 18 17:08:33 2000  Shugo Maeda <shugo@@netlab.co.jp>

	* eruby.c (eruby_init): new module ERuby.

	* Makefile.RB: added --default-charset option.

Wed Apr  5 17:11:15 2000  Shugo Maeda <shugo@@netlab.co.jp>

	* version 0.1.7 released.

Fri Mar 31 18:51:20 2000  Shugo Maeda <shugo@@netlab.co.jp>

	* eruby.c (eruby_compile): bug fix.

Thu Mar 30 17:07:30 2000  Shugo Maeda <shugo@@netlab.co.jp>

	* version 0.1.6 released.

Thu Mar 30 17:04:29 2000  Shugo Maeda <shugo@@netlab.co.jp>

	* mod_ruby.c (setup_env): use ap_add_common_vars() and
	ap_add_cgi_vars().

	* mod_ruby.c (get_charset): UTF8 -> UTF-8.

	* Makefile.RB: new option --apxs.

	* apachelib.c (request_aref): return nil if key =~ /authorization/i.

Tue Mar 28 14:41:12 2000  Shugo Maeda <shugo@@netlab.co.jp>

	* version 0.1.5 released.

Wed Dec 15 23:25:39 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* mod_ruby.c (load_eruby_script): do not set Content-Encoding,
	but set Content-Length.

Thu Aug 12 11:50:49 1999  Katsuyuki Komatsu <komatsu@@sarion.co.jp>

	* Makefile.RB: overwrite XLDFLAGS and DLDFLAGS for AIX.

	* Makefile.RB: remove -Wl, from LIBRUBYARG and XLDFLAGS for AIX.

	* Makefile.RB: remove mod_ruby.imp in distclean target.

Tue Aug 10 15:41:30 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* version 0.1.4 released.

Tue Aug 10 15:39:32 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* Makefile.RB: use ftools instead of INSTALL_PROGRAM.

Thu Jul 22 15:47:51 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* mod_ruby.c (ruby_error_print): pass "%s" to ap_log_error().

Wed Jul 14 11:00:04 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* mod_ruby.c (thread_kill): new function.

	* mod_ruby.c (ruby_handler0): kill wcb_thread on exit.

Tue Jul 13 17:03:51 1999  Katsuyuki Komatsu <komatsu@@sarion.co.jp>

	* Makefile.RB: hack for AIX.

Fri Jul  9 19:24:38 1999  Shugo Maeda  <shugo@@netlab.co.jp>

	* Makefile.RB: add XLDFLAGS.

Fri Jul  9 13:27:01 1999  Katsuyuki Komatsu <komatsu@@sarion.co.jp>

	* Makefile.RB: replace -L. with -L$(prefix)/lib in LIBRUBYARG.

Tue Jul  6 18:40:42 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* version 0.1.3 released.

Tue Jul  6 13:10:29 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* mod_ruby.c (write_client_block0): use small size buffer.

	* apachelib.c: rename Request#method to Request#request_method.

Mon Jul  5 22:04:32 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* Makefile.RB: use LIBS.

Mon Jul  5 21:57:12 1999  NAKAMURA, Hiroshi <nakahiro@@sarion.co.jp>

	* Makefile.RB: use INSTALL_DLLIB and compile_dir.

Fri Jun 25 11:22:52 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* mod_ruby.c (write_client_block0): ensure that fd is writable.

Mon Jun 21 16:21:54 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* version 0.1.2 released.

Mon Jun 21 16:08:24 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* include eRuby sources.

	* mod_ruby.c: renamed from ruby_module.c for static linking.

	* Makefile.RB: use .so instead of CONFIG["DLEXT"].

Tue Jun  1 16:03:58 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* Makefile.RB: use shared library for eRuby.

	* ruby_module.c (ruby_handler0): call rb_exec_end_proc() and rb_gc().

Fri May 21 11:55:40 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* ruby_module.c (get_exception_info): pop from errat.

	* ruby_module.c (load_eruby_script): unlink temporary file.

Thu May 20 14:58:31 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* version 0.1.1 released.

Thu May 20 14:54:32 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* ruby_module.c (eruby_handler): handle ruby embedded HTML file.

	* Makefile.RB: renamed from configure.rb.

	* Makefile.RB: use apxs.

	* Makefile.RB: added options --enable-eruby and --eruby-dir.

Tue Apr 20 16:22:11 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* version 0.1.0 released.

Mon Apr 19 19:37:26 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* ruby_module.c (ruby_error_print): print error info to error.log.

Tue Apr 13 20:13:32 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* ruby_config.c: new file.

Mon Apr 12 18:29:32 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* ruby_module.c (merge_dir_config): new function.

	* ruby_module.c: move ruby_module definition to top.

	* ruby_module.c: remove HASH_FREEZE macro.

Wed Apr  7 18:48:50 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* ruby_module.c (ruby_cmd_export_env): remove command RubyExportEnv.

	* ruby_module.c (ruby_cmd_pass_env): new command RubyPassEnv.

	* ruby_module.c (ruby_comd_set_env): new command RubySetEnv.

	* apachelib.c: remove Apache::Writable and define output methods
	directly in Apache::Request.

Tue Apr  6 19:41:45 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* version 0.0.9 released.

Tue Apr  6 18:52:09 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* ruby_module.c (ruby_cmd_timeout): new command RubyTimeout.

Fri Apr  2 14:06:20 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* ruby_module.c (do_timeout): new function.

Thu Mar 18 11:13:15 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* ruby_module.c: #include "util.h"

	* apachelib.c: do not cast const char* to char*.

Fri Mar 12 16:53:09 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* ruby_module.c (ruby_startup): use RUBY_RELEASE_DATE instead of VERSION_DATE.

Tue Mar  9 15:33:44 1999  KIMURA Koichi <kimura@@sqa.canon.co.jp>

	* ruby_module.c (mr_clearenv): hack for win32.

Sun Mar  7 20:35:00 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* version 0.0.8 released.

Sun Mar  7 19:59:52 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* apachelib.c (apache_server_version): new method.

	* apachelib.c (apache_server_built): new method.

	* README.en: new file.

	* README.ja: new file.

Tue Mar  2 21:04:56 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* ruby_module.c (mr_clearenv): new function.

	* ruby_module.c (ruby_error_print): always print error message in HTML.

	* ruby_module.c (setup_env): new environment variables REQUEST_URI,
	SCRIPT_NAME, PATH_TRANSLATED.

	* apachelib.c (apache_unescape_url): new method.

	* apachelib.c (request_escape_html): new method.

Mon Mar  1 11:58:24 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* version 0.0.7 released.

Mon Mar  1 11:12:41 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* ruby_module.c (ruby_handler): protect Thread#join. (but I don't
	know why I need it.)

Sat Feb 27 01:28:15 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* ruby_module.[ch]: renamed from mod_ruby.[ch]

	* apachelib.[ch]: renamed from apache.[ch]

	* configure.rb: rename option --apachelib to --apachelibexec.

	* ruby_module.c (ruby_cmd_export_env): new command RubyExportEnv.

Thu Feb 25 20:52:04 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* mod_ruby.c (setup_env): new environment variable HTTP_CONNECTION.

	* mod_ruby.c (ruby_startup): add version component (ruby version).

Tue Feb 23 23:26:42 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* apache.c (rb_request_flush): new method. (renamed from
	rb_exec_request.)

	* apache.c (request_write): if sync mode is true, write data
	to client immediately.

	* apache.c (ruby_create_request): use request_data structure
	instead of using request_rec directly.

	* mod_ruby.c (ruby_error_print): if sync mode is true, print
	error information in HTML.

	* mod_ruby.c (clearenv): realloc environ.

Tue Feb 23 17:05:12 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* version 0.0.6 released.

Tue Feb 23 16:50:29 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* apache.c (request_hostname): new method.

	* apache.c (request_unparsed_uri): new method.

	* apache.c (request_uri): new method.

	* apache.c (request_filename): new method.

	* apache.c (request_path_info): new method.

	* apache.c (request_request_time): new method.

	* mod_ruby.c (setup_env): restore environment variables.

Tue Feb 23 09:47:11 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* apache.c (request_method): new method.

	* apache.c (request_args): new method.

	* apache.c (request_content_length): new method.

	* apache.c (send_to_stdin): new method `read', `gets', etc....

Mon Feb 22 23:19:30 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* apache.c (request_aset): set Content-Type and Content-Encoding
	properly.

Fri Feb 19 16:13:04 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* mod_ruby.c (ruby_startup): fix typo.

	* apache.c (writable_addstr): new method.

	* apache.c (writable_flush): new method.

	* apache.c (writable_get_sync): new method.

	* apache.c (writable_set_sync): new method.

	* apache.c (request_each_key): new method.

	* apache.c (request_each_value): new method.

	* apache.c (ruby_init_apache): Apache::Request include Enumerable.

Fri Feb 19 03:09:39 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* version 0.0.5 released.

Fri Feb 19 03:04:30 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* apache.c (request_each_header): new method.

	* mod_ruby.c (ruby_startup): define global constant MOD_RUBY.

Thu Feb 18 20:17:45 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* apache.c (request_get_content_languages): new method.

	* apache.c (request_set_content_languages): new method.

Thu Feb 18 19:28:37 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* apache.c: new module Writable.

	* apache.c (ruby_init_apache): renamed from `Init_apache'.

	* apache.c (ruby_init_apache): Apache::Request include Apache::Writable
	 instead of inheriting IO.

Thu Feb 18 15:05:54 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* apache.c (Init_apache): define HTTP status code constants.

Thu Feb 18 06:48:40 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* apache.c (Init_apache): rename Request#send_header to `send_http_header'.

	* mod_ruby.c (ruby_handler): pass exit status code to Apache.

Wed Feb 17 00:57:46 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* version 0.0.4 released.

Wed Feb 17 00:44:55 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* mod_ruby.c (ruby_startup): set script name to "mod_ruby".

	* mod_ruby.c (ruby_error_pos): use snprintf() instead of sprintf().

	* mod_ruby.c (ruby_error_print): set r->content_type to "text/plain".

Wed Feb 17 00:39:15 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* apache.c (ruby_exec_request): new function.

	* apache.c (request_aref): new method.

	* apache.c (request_aset): new method.

Tue Feb 16 22:00:13 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* mod_ruby.c (ruby_setenv2): emulate new function ruby_setenv2.

Tue Feb 16 15:42:09 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* version 0.0.3 released.

Mon Feb 15 18:39:12 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* mod_ruby.c: remove RubySafeLevel command.

	* mod_ruby.c (ruby_startup): set safe level to 1.

Fri Feb 12 03:54:43 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* mod_ruby.c: stdin support.

	* apache.c: remove rb_query.

	* configure.rb: new file.

Sat Feb  6 23:46:37 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* apache.c: new class StringStream.

	* mod_ruby.c (load_script): catch SystemExit.

	* mod_ruby.c (query_aset): join multiple value in query
	string with '\0'.

	* mod_ruby.c (ruby_handler): use thread for $SAFE.

	* apache.c (f_getenv): environment variable support.

Sat Jan  9 03:55:21 1999  Shugo Maeda <shugo@@netlab.co.jp>

	* version 0.0.2 released.

Mon Dec 21 12:05:03 1998  Shugo Maeda <shugo@@netlab.co.jp>

	* version 0.0.1 released.

Local variables:
mode: Change-Log
tab-width: 8
End:
@


1.138
log
@* lib/auto-reload.rb (require): fixed reversed condition.
@
text
@d1 4
@


1.137
log
@* merged from version_1_0-branch.
@
text
@d1 4
@


1.136
log
@* lib/auto-reload.rb (require): avoid endless recursion.
@
text
@d1 4
@


1.135
log
@* lib/auto-reload.rb (require): check the dependency of libraries.
@
text
@d1 4
@


1.134
log
@* lib/apache/eruby-run.rb (postrun): do not overwrite r.content_type.
@
text
@d1 4
d18 1
a18 1
	ruby-1.7.2.
@


1.133
log
@* mod_ruby.c: RubyTransHandler and RubyPostReadRequestHandler
are allowed only globally or in <VirtualHost> now.
Thanks, Eugene Scripnik <Eugene.Scripnik@@itgrp.net>.
* lib/auto-reload.rb (require): fix for the behaviour of nil on
ruby-1.7.2.
@
text
@d1 4
@


1.132
log
@* version 1.0.0 released.
@
text
@d1 11
@


1.132.2.1
log
@* merged from HEAD.
@
text
@a0 11
Fri Aug 23 12:06:53 2002  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c: RubyTransHandler and RubyPostReadRequestHandler
	are allowed only globally or in <VirtualHost> now.
	Thanks, Eugene Scripnik <Eugene.Scripnik@@itgrp.net>.

Fri Aug 23 12:02:11 2002  Eugene Scripnik <Eugene.Scripnik@@itgrp.net>
	
	* lib/auto-reload.rb (require): fix for the behaviour of nil on
	ruby-1.7.2.

@


1.132.2.2
log
@* merged from trunk.
@
text
@a0 4
Thu Aug 29 13:30:40 2002  Shugo Maeda <shugo@@modruby.net>
	
	* lib/apache/eruby-run.rb (postrun): do not overwrite r.content_type.

@


1.132.2.3
log
@* request.c: handle apr_time_t correctly.
@
text
@a0 4
Thu Sep  5 13:29:00 2002  GOTOU Yuuzou <gotoyuzo@@notwork.org>

	* request.c: handle apr_time_t correctly.

@


1.132.2.4
log
@*** empty log message ***
@
text
@a0 4
Fri Oct 25 12:21:07 2002  Shugo Maeda <shugo@@modruby.net>
	
	* request.c (request_set_args): new method.

@


1.132.2.5
log
@* version 1.0.1 released.
@
text
@a0 4
Tue Oct 29 11:38:09 2002  Shugo Maeda <shugo@@modruby.net>

	* version 1.0.1 released.

@


1.131
log
@* ruby_config.c (ruby_cmd_safe_level): RubySafeLevel on the top
level of httpd.conf can set $SAFE to 0 now.
@
text
@d1 4
@


1.130
log
@* lib/apache/eruby-run.rb (handler): send http header even if
Kernel#exit is called from eRuby scripts.
* lib/apache/eruby-debug.rb (run): ditto.
@
text
@d1 5
@


1.129
log
@* server.c (server_log_emerge): new method.
* server.c (server_log_alert): ditto.
* server.c (server_log_crit): ditto.
* server.c (server_log_info): ditto.
@
text
@d1 7
@


1.128
log
@* lib/apache/ruby-debug.rb (handler): do not catch SystemExit.
* lib/apache/eruby-debug.rb (run): ditto.
@
text
@d1 10
@


1.127
log
@* mod_ruby.c (ruby_require): do not require doubly.
@
text
@d1 6
@


1.126
log
@* configure.rb.in: cause error if both --with-apache and
--with-apxs specified.
* configure.rb.in: cause error if --with-apache is specified for
Apache2.
@
text
@d1 4
@


1.125
log
@* lib/apache/ruby-debug.rb: use ERubyDebug like HTML.
* lib/apache/eruby-debug.rb: change title and delete a comment.
@
text
@d1 8
@


1.124
log
@* version 0.9.9 released.
@
text
@d1 6
@


1.123
log
@* lib/apache/eruby-debug.rb: new module to debug eRuby scripts.
@
text
@d1 4
@


1.122
log
@* configure.rb.in: fix for cygwin.
@
text
@d1 4
@


1.121
log
@* mod_ruby.c (ruby_startup): remove already require libraries from
conf->load_path.
@
text
@d1 4
@


1.120
log
@* ruby_config.c (ruby_cmd_require): fixed the third argument of
ap_make_array().
* ruby_config.c (ruby_merge_server_config): new function.
@
text
@d1 5
@


1.119
log
@* ruby_config.c (ruby_cmd_require): push ruby_server_config* and
ruby_dir_config* to ruby_required_libraries.
@
text
@d1 7
@


1.118
log
@* apachelib.c (apache_server_root): moved from
request.c:request_server_root().
* request.c (request_proxy_q): fix for Apache2.
* request.c (request_proxy_pass_q): ditto.
* request.c (request_lookup_uri): ditto.
* request.c (request_lookup_file): ditto.
* request.c (request_server_root): new method.
* request.c (request_get_dispatch_handler): ditto.
* request.c (request_set_dispatch_handler): ditto.
* request.c (request_proxy_q): ditto.
* request.c (request_proxy_pass_q): ditto.
* request.c (request_get_cache_resp): ditto.
* request.c (request_set_cache_resp): ditto.
* request.c (request_get_cache_resp): ditto.
* request.c (request_lookup_uri): ditto.
* request.c (request_lookup_file): ditto.
@
text
@d1 5
@


1.117
log
@* apachelib.c (apache_server_root): moved from
request.c:request_server_root().
* request.c (request_proxy_q): fix for Apache2.
* request.c (request_proxy_pass_q): ditto.
* request.c (request_lookup_uri): ditto.
* request.c (request_lookup_file): ditto.
* request.c (request_server_root): new method.
* request.c (request_get_dispatch_handler): ditto.
* request.c (request_set_dispatch_handler): ditto.
* request.c (request_proxy_q): ditto.
* request.c (request_proxy_pass_q): ditto.
* request.c (request_get_cache_resp): ditto.
* request.c (request_set_cache_resp): ditto.
* request.c (request_get_cache_resp): ditto.
* request.c (request_lookup_uri): ditto.
* request.c (request_lookup_file): ditto.
@
text
@d1 5
@


1.116
log
@* mod_ruby.c (per_request_init): use sconf->load_path.
* mod_ruby.c (ruby_require): call require method.
@
text
@d1 35
@


1.115
log
@* table.c (table_set): use ap_pstrndup().
* table.c (table_merge): ditto.
* table.c (table_add): ditto.
@
text
@d1 8
@


1.114
log
@* Makefile.in: added datadir.
* configure.rb: added datadir support.
@
text
@d1 8
@


1.113
log
@*** empty log message ***
@
text
@d1 6
@


1.112
log
@	* mod_ruby.h: Moved several define's from mod_ruby.c.

	* mod_ruby.c (per_request_cleanup): fixed SEGV for internal
	subrequest clean up.

	* request.c (request_last) new method.

	* request.c (request_internal_redirect) ditto.

	* request.c (request_custom_response) ditto.

	* request.c (request_is_main) ditto.

	* request.c (request_is_initial) ditto.

	* request.c (request_bytes_sent) ditto.

	* request.c (request_send_fd) ditto.
@
text
@d1 6
@


1.111
log
@* version 0.9.8 released.
@
text
@d1 21
@


1.110
log
@* lib/apache/eruby-run.rb: do not send header on sync mode.
* lib/apache/erb-run.rb: ditto.
@
text
@d1 4
@


1.109
log
@* request.c (request_set_user): new method.

* request.c (request_set_auth_type): ditto.

* request.c (request_set_auth_name): ditto.

* connection.c (connection_set_user): ditto.

* connection.c (connection_set_auth_type): ditto.

* connection.c (connection_remote_port): fix for Apache2.

* connection.c (connection_local_port): ditto.

* connection.c (connection_remote_port): new method.

* connection.c (connection_local_port): ditto.
@
text
@d1 6
@


1.108
log
@* doc: added documents.
@
text
@d1 22
@


1.107
log
@* supports Apache 2.0.
@
text
@d1 4
@


1.106
log
@* table.c (table_setn): removed.
* table.c (table_mergen): ditto.
* table.c (table_addn): ditto.
@
text
@d1 4
@


1.105
log
@* ruby_config.c (ruby_cmd_add_path): allow to use RubyAddPath in
.htaccess.
@
text
@d1 8
d11 1
a11 1
	* ruby_config.c (ruby_cmd_add_path): allow to use RubyAddPath in
@


1.104
log
@*** empty log message ***
@
text
@d1 5
@


1.103
log
@* version 0.9.7 released.
@
text
@d1 6
d13 1
a13 1
	* lib/aapche/ruby-run.rb (handler): return DECLINED for OPTIONS
d16 1
a16 1
	* lib/aapche/eruby-run.rb (handler): ditto.
d18 1
a18 1
	* lib/aapche/erb-run.rb (handler): ditto.
d20 1
a20 1
	* lib/aapche/ruby-debug.rb (handler): ditto.
d22 1
a22 1
	* lib/aapche/rd2html.rb (handler): ditto.
@


1.102
log
@* version 0.9.6 released.
@
text
@d1 17
@


1.101
log
@* apachelib.h (CSTR2OBJ): use rb_tainted_str_new2().
* array_header.c: ditto.
* table.c: ditto.
* server.c: ditto.
* lib/apache/ruby-run.rb: use untaint.
* lib/apache/eruby-run.rb: ditto.
* lib/apache/erb-run.rb: ditto.
* lib/apache/rd2html.rb: ditto.
@
text
@d1 20
@


1.100
log
@* Makefile.in (install-ruby): lib/$$file -> $(srcdir)/lib/$$file.
@
text
@d1 18
@


1.99
log
@* version 0.9.5 released.
@
text
@d1 6
@


1.98
log
@* mod_ruby.c (ruby_startup): save Apache's signal handlers.
@
text
@d1 4
@


1.97
log
@* connection.c (connection_aborted): new method.
@
text
@d1 4
@


1.96
log
@* version 0.9.4 released.
@
text
@d1 4
@


1.96.2.1
log
@* merged the changes in HEAD.
@
text
@a0 4
Tue Oct 30 14:56:22 2001  Neil Conway <nconway@@klamath.dyndns.org>

	* connection.c (connection_aborted): new method.

@


1.95
log
@* mod_ruby.c (ruby_startup): call Init_stack().
* request.c (cleanup_request_object): free RDATA(reqobj)->data.
* request.c (request_headers_in): allow non-auth handlers to
access Authorization header fields.
* request.c (request_get_basic_auth_pw): allow non-auth handlers.
@
text
@d1 4
@


1.94
log
@* apachelib.h (DEFINE_ATTR_READER): raise exception if data == NULL.
* apachelib.h (DEFINE_ATTR_WRITER): ditto.
* mod_ruby.c (per_request_cleanup): set r->main to rb_request if r
is a sub_request.
* request.c (request_mark): return immediately if data == NULL.
@
text
@d1 11
@


1.93
log
@* configure.rb.in: chomp output of apxs.
@
text
@d1 11
@


1.92
log
@* ruby_config.c (ruby_cmd_output_mode): new directive RubyOutputMode.
@
text
@d1 5
a5 1
Wed Oct 10 12:15:16 2001  Shugo Maeda  <shugo@@modruby.net>
@


1.91
log
@*** empty log message ***
@
text
@d1 3
a3 1
2001-10-04  Shugo Maeda  <shugo@@netlab.jp>
@


1.90
log
@* request.c(rb_apache_request_flush): call ap_rflush().
* request.c: allow the path_info for the request to be changed.
@
text
@d1 7
d10 1
a10 1
	* request.c(rb_apache_request_flush): call ap_rflush().
@


1.89
log
@* version 0.9.3 released.
@
text
@d1 6
@


1.88
log
@* lib/apache/eruby-run.rb (postrun): do not overwrite r.content_type.
* mod_ruby.c (ruby_require): handle SystemExit correctly.
* request.c (request_method_number): new method.
* apachelib.c: new constants M_GET, M_PUT, ....
* configure.rb: rebuild with autoconf.rb 0.2.3 for Solaris.
@
text
@d1 4
@


1.87
log
@* version 0.9.2 released.
@
text
@d1 18
@


1.86
log
@* version 0.9.1 released.
@
text
@d1 8
@


1.85
log
@* mod_ruby.c (ruby_handler): flush rb_request only in RubyHandler.
* server.c (server_document_root): new method.
Thanks to Sean Chittenden.
@
text
@d1 8
@


1.84
log
@* mod_ruby.c (per_request_cleanup): do not restore rb_stdout.
@
text
@d1 12
@


1.83
log
@* request.c (request_the_request): new method.
@
text
@d1 4
@


1.82
log
@* version 0.9.0 released.
@
text
@d1 4
@


1.81
log
@* request.c (request_sent_http_header): new method.
@
text
@d1 4
@


1.80
log
@* request.c (request_set_content_type): accept nil.
* request.c (request_set_content_encoding): ditto.
* request.c (request_set_content_languages): ditto.
@
text
@d1 4
@


1.79
log
@* mod_ruby.c (per_request_init): set rb_stdin, rb_stdout,
rb_defout to rb_request.
* mod_ruby.c (per_request_cleanup): flush rb_request.
* request.c (request_output_buffer): new method.
* lib/apache/cgi-support.rb: removed.
* lib/apache/eruby-run.rb: use tempfile.
* lib/apache/erb-run.rb: ditto.
@
text
@d1 8
@


1.78
log
@* mod_ruby.c: cancel modification.
@
text
@d1 15
@


1.77
log
@* mod_ruby.c (ruby_cleanup_handler): call rb_exec_end_proc().
(It was called in per_request_cleanup() before.)
@
text
@a0 5
Thu Jun 28 17:55:09 2001  Shugo Maeda <shugo@@modruby.net>

	* mod_ruby.c (ruby_cleanup_handler): call rb_exec_end_proc().
	(It was called in per_request_cleanup() before.)

@


1.76
log
@* version 0.8.5 released.
@
text
@d1 5
@


1.75
log
@* mod_ruby.c (per_request_init): recycle rb_request.
* request.c: removed notes from struct request_data.
* request.c (rb_apache_request_flush): flush only once.
* request.c (request_to_s): removed.
@
text
@d1 8
@


1.74
log
@* mod_ruby.c (load_eruby_script): don't use print_error().
* mod_ruby.c (ruby_handler): multi-handler support.
* ruby_config.c (ruby_cmd_post_read_request_handler): new handler.
* ruby_config.c (ruby_cmd_init_handler): ditto.
* ruby_config.c (ruby_cmd_cleanup_handler): ditto.
@
text
@d1 10
@


1.73
log
@* lib/apache/eruby-run.rb: don't check ExecCGI.
* lib/apache/erb-run.rb: ditto.
@
text
@d1 12
@


1.72
log
@* ruby_config.c (ruby_cmd_require): use ruby_required_libraries
for virtual hosts.
* lib/apache/erb-run.rb: no need to inherit Apache::RubyRun.
@
text
@d1 6
@


1.71
log
@* mod_ruby.c (ruby_startup): removed Ruby version from version
	component.
* mod_ruby.c (ruby_startup): log error if ruby_require() fails.
* mod_ruby.c (ruby_handler): don't call rb_apache_request_flush()
on error.
* request.c (rb_apache_request_new): should initialize data->server.
* lib/apache/ruby-run.rb (handler): require ExecCGI and exec
permission.
* lib/apache/eruby-run.rb (handler): require ExecCGI.
* lib/apache/cgi-support.rb: new file.
* lib/apache/erb-run.rb: new file, supports ERb.
@
text
@d1 7
d10 2
a11 2
	* mod_ruby.c (ruby_startup): removed Ruby version from version
	component.
@


1.70
log
@* version 0.8.4 released.
@
text
@d1 21
@


1.69
log
@* mod_ruby.c (ruby_handler_0): handle SystemExit correctly.
* array_header.c (array_length): new method.
* table.c: renamed ApacheInTable to ApacheRestrictedTable.
* request.c (rb_apache_request_new): don't set content_type.
* request.c (request_headers_in): return non-restricted table for
RubyAuthenHandler.
* request.c (request_notes): removed.
* request.c (request_allow_options): new method.
* request.c (request_allow_overrides): ditto.
* request.c (request_default_type): ditto.
* request.c (request_construct_url): ditto.
* request.c (request_auth_type): ditto.
* request.c (request_auth_name): ditto.
* request.c (request_satisfies): ditto.
* request.c (request_requires): ditto.
* request.c (request_note_auth_failure): ditto.
* request.c (request_note_basic_auth_failure): ditto.
* request.c (request_note_digest_auth_failure): ditto.
* request.c (request_basic_auth_pw): ditto.
@
text
@d1 8
@


1.68
log
@* mod_ruby.c (ruby_translate_handler): new handler.
* mod_ruby.c (ruby_authen_handler): ditto.
* mod_ruby.c (ruby_authen_handler): ditto.
* mod_ruby.c (ruby_authz_handler): ditto.
* mod_ruby.c (ruby_access_handler): ditto.
* mod_ruby.c (ruby_type_handler): ditto.
* mod_ruby.c (ruby_fixup_handler): ditto.
* mod_ruby.c (ruby_log_handler): ditto.
* mod_ruby.c (ruby_header_parser_handler): ditto.
@
text
@d1 39
d42 1
a42 3
	* mod_ruby.c (ruby_translate_handler): new handler.

	* mod_ruby.c (ruby_authen_handler): ditto.
@


1.67
log
@* configure.rb.in: check for gcc.
* mod_ruby.c (ruby_object_handler_0): call log_error().
* lib/apache/eruby-run.rb (handler): set @@compiler.sourcefile.
@
text
@d1 20
d821 1
a821 1
mode: ChangeLog
@


1.66
log
@* Makefile.in: libruby.a support.
* configure.rb.in: ditto.
* configure.rb: generated by autoconf.rb version 0.2.
* mod_ruby.c (get_exception_info): don't use str2cstr macro for
Ruby 1.7.
* mod_ruby.c (protect_funcall0): changed type of argument to
VALUE.
* mod_ruby.c (ruby_require): cast rb_require() to VALUE (*)(VALUE).
@
text
@d1 8
d23 1
a23 1
	* mod_ruby.c (ruby_require): cast rb_require() to VALUE (*)(VALUE).
@


1.65
log
@* examples/httpd.conf: changed the example of Apache's LIBEXECDIR
to /usr/local/apache/libexec.
@
text
@d1 16
@


1.64
log
@* version 0.8.3 released.
@
text
@d1 5
@


1.63
log
@* request.c (request_escape_html): add taint status infection.
* mod_ruby.c (ruby_object_handler): call rb_exec_end_proc().
@
text
@d1 4
@


1.62
log
@* version 0.8.2 released.
@
text
@d1 6
@


1.61
log
@* lib/auto-reload: new file.
* lib/apache/ruby-run.rb: renamed from ruby/apache/ruby.rb.
* lib/apache/eruby-run.rb: renamed from ruby/apache/eruby.rb.
* lib/apache/rd2html.rb: renamed from ruby/apache/rd2html.rb.
* lib/apache/eruby-run.rb (handler): specify filename for backtrace.
* changed license from GPL to LGPL.
* COPYING: new file.
@
text
@d1 4
@


1.60
log
@* configure.rb.in: exit if fail to exec apxs.
@
text
@d1 18
@


1.59
log
@* configure.rb.in: removed -mwin32 hack.
@
text
@d1 4
@


1.58
log
@* mod_ruby.c: don't include config.h.
@
text
@d1 4
@


1.57
log
@* mod_ruby.c: hack for cygwin.
* configure.rb.in: ditto.
@
text
@d1 4
@


1.56
log
@* mod_ruby.c (ruby_startup): don't initialize ruby if
ruby_running(). (for static Apache module)
* mod_ruby.c: use EXTERN.
* libruby.module.in: use MODULE_LIBS to expand LIBRUBYARG.
* configure.rb.in: set $ERUBY_INCLUDES instead of modify $CFLAGS.
* Makefile.in: RUBY_SO_NAME for cygwin.
@
text
@d1 6
@


1.55
log
@* install-rb: new file.
* Makefile.in: change owner and group of $(APACHE_SRCDIR)/
src/modules/ruby/*.
@
text
@d1 13
@


1.54
log
@* Makefile.in: static Apache module support..
@
text
@d1 7
@


1.53
log
@* Makefile.RB: removed.
@
text
@d1 14
@


1.52
log
@* ruby/apache/eruby.rb: do not require "cgi/session".
* configure.rb: new file.
* Makefile.in: new file.
@
text
@d1 4
@


1.51
log
@* fixed copyright notice.
* array_header.c: new file for Apache::ArrayHeader.
* server.c: added some methods.
@
text
@d1 8
@


1.50
log
@* version 0.8.1 released.
@
text
@d1 8
@


1.49
log
@* ruby/apache/ruby.rb (emulate_cgi): new method.
* ruby/apache/eruby.rb: inherit Apache::Ruby.
* table.c: new file for Apache::Table.
* connection.c: new file for Apache::Connection.
* server.c: new file for Apache::Server.
* request.c: new file for Apache::Request.
* request.c (request_setup_cgi_env): new method.
* mod_ruby.c (script_handler): resotre original $stdin, $stdout
and $>.
@
text
@d1 4
@


1.48
log
@* apachelib.c (request_finfo): new method Apache::Request#finfo.
* mod_ruby.c (load_eruby_script): supports eruby-0.9.0.
* ruby/apache/eruby.rb: new handler Apache::ERuby.
@
text
@d1 21
@


1.47
log
@* ruby/apache/ruby.rb: new handler Apache::Ruby.
* ruby/apache/rd2html.rb: renamed from mod_rd2html.rb.
* apachelib.c (request_read): do not use buffer.
* apachelib.c (ruby_init_apachelib): remove methods from
Apache::request. (gets, readline, readlines, each, getc,
readchar, ungetc, tell, seek, rewind, pos, pos=)
* apachelib.c (ruby_init_apachelib): new class Apache::Server.
@
text
@d1 8
@


1.46
log
@* version 0.8.0 released.
@
text
@d1 16
@


1.45
log
@*** empty log message ***
@
text
@d1 42
@


1.44
log
@* mod_ruby.c (run_safely_0): call ruby_log_error() on error.
@
text
@d1 14
@


1.43
log
@*** empty log message ***
@
text
@d1 4
@


1.42
log
@* lib/net/imap.rb: fix typo.
@
text
@d1 10
@


1.41
log
@*** empty log message ***
@
text
@d1 4
@


1.40
log
@fixed Apache::InTable#[].
@
text
@d1 6
@


1.39
log
@*** empty log message ***
@
text
@d1 4
@


1.38
log
@shugo

* intern.h: added prototype of rb_exec_end_proc()
@
text
@d1 8
@


1.37
log
@*** empty log message ***
@
text
@d1 4
@


1.36
log
@*** empty log message ***
@
text
@d13 1
a13 1
	* mod_ruby.c: (get_exception_info): bug fix.
@


1.35
log
@shugo
* lib/net/imap.rb: don't upcase the value of ATOM token.
@
text
@d1 4
@


1.34
log
@*** empty log message ***
@
text
@d1 4
@


1.33
log
@*** empty log message ***
@
text
@d1 6
@


1.32
log
@*** empty log message ***
@
text
@d1 6
@


1.31
log
@*** empty log message ***
@
text
@d1 6
@


1.30
log
@*** empty log message ***
@
text
@d1 4
@


1.29
log
@*** empty log message ***
@
text
@d1 4
@


1.28
log
@*** empty log message ***
@
text
@d1 5
@


1.27
log
@*** empty log message ***
@
text
@d1 9
@


1.26
log
@q
@
text
@d1 4
@


1.25
log
@*** empty log message ***
@
text
@d1 4
@


1.24
log
@*** empty log message ***
@
text
@a0 4
Wed Aug  2 15:11:52 2000  Shugo Maeda <shugo@@ruby-lang.org>

	* version 0.1.9 released.

@


1.23
log
@*** empty log message ***
@
text
@d1 1
a1 1
Wed Aug  2 14:14:32 2000  Shugo Maeda <shugo@@ruby-lang.org>
d4 6
@


1.22
log
@*** empty log message ***
@
text
@d1 4
@


1.21
log
@*** empty log message ***
@
text
@d1 4
@


1.20
log
@*** empty log message ***
@
text
@d1 7
@


1.19
log
@*** empty log message ***
@
text
@d1 1
a1 1
Wed Jun 14 12:24:33 2000  Shugo Maeda <shugo@@netlab.co.jp>
d5 2
@


1.18
log
@*** empty log message ***
@
text
@d1 9
@


1.17
log
@*** empty log message ***
@
text
@d1 17
@


1.16
log
@*** empty log message ***
@
text
@d1 1
a1 1
Thu May 18 17:08:38 2000  Shugo Maeda <shugo@@netlab.co.jp>
d3 5
a7 1
	* version 0.1.8 released.
@


1.15
log
@*** empty log message ***
@
text
@d1 10
@


1.14
log
@*** empty log message ***
@
text
@d1 8
@


1.13
log
@*** empty log message ***
@
text
@d1 15
@


1.12
log
@*** empty log message ***
@
text
@d1 9
@


1.11
log
@*** empty log message ***
@
text
@d1 8
@


1.10
log
@*** empty log message ***
@
text
@d1 8
@


1.9
log
@*** empty log message ***
@
text
@d1 4
@


1.8
log
@*** empty log message ***
@
text
@d1 10
@


1.7
log
@*** empty log message ***
@
text
@d1 4
@


1.6
log
@*** empty log message ***
@
text
@d1 4
@


1.5
log
@*** empty log message ***
@
text
@d1 22
@


1.4
log
@*** empty log message ***
@
text
@d1 12
@


1.3
log
@*** empty log message ***
@
text
@d1 6
@


1.2
log
@*** empty log message ***
@
text
@d1 6
@


1.1
log
@Initial revision
@
text
@d1 14
@


1.1.1.1
log
@
@
text
@@
