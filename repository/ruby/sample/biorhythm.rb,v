head	1.7;
access;
symbols
	v1_6_7:1.5
	v1_6_6:1.5
	v1_6_5:1.5
	v1_6_4:1.5
	v1_7_1:1.5
	v1_6_4_preview4:1.5
	v1_6_4_preview3:1.5
	v1_6_4_preview2:1.5
	v1_6_4_preview1:1.5
	v1_6_3:1.5
	ruby_m17n:1.5.0.4
	ruby_1_6:1.5.0.2
	v1_6_2:1.5
	v1_6_1:1.5
	v1_6_0:1.5
	v1_4_6:1.2
	v1_4_5:1.2
	v1_4_4:1.2
	ruby_1_4_3:1.2
	ruby1_4_3:1.2
	v1_4_3:1.2
	v1_5_0:1.2
	ruby_1_4_3_pre1:1.2
	ruby_1_4:1.2.0.2
	v1_4_2:1.2
	v1_4_1:1.2
	v1_4_0:1.2
	v1_3_7:1.1.1.2.2.1
	v1_3_6_repack:1.1.1.2.2.1
	v1_3_6:1.1.1.2.2.1
	v1_3_5:1.1.1.2.2.1
	v1_2_6repack:1.1.1.1.4.1
	v1_3_4_990625:1.1.1.2.2.1
	v1_3_4_990624:1.1.1.2.2.1
	v1_2_6:1.1.1.1.4.1
	v1_3_4_990611:1.1.1.2.2.1
	v1_3_4_990531:1.1.1.2.2.1
	v1_3_3_990518:1.1.1.2.2.1
	v1_3_3_990513:1.1.1.2.2.1
	v1_3_3_990507:1.1.1.2.2.1
	v1_2_5:1.1.1.1.4.1
	v1_2_4:1.1.1.1.4.1
	v1_3_1_990225:1.1.1.2.2.1
	v1_3_1_990224:1.1.1.2.2.1
	v1_3_1_990215:1.1.1.2.2.1
	v1_3_1_990212:1.1.1.2.2.1
	v1_3_1_990210:1.1.1.2.2.1
	v1_3_1_:1.1.1.2.2.1
	v1_3_1_990209:1.1.1.2.2.1
	v1_3_1_990205:1.1.1.2
	v1_3_1_990203:1.1.1.2
	v1_3_1_990201:1.1.1.2
	v1_3_1"_990201:1.1.1.2
	v1_3_1_990128:1.1.1.2
	v1_3_1_990127:1.1.1.2
	v1_3_1_990126:1.1.1.2
	ruby_1_3:1.1.1.2.0.2
	v1_2_2:1.1.1.1.4.1
	RUBY_1_3:1.1.1.2
	v1_2_2_pr1:1.1.1.1.4.1
	v1_2_1repack:1.1.1.1.4.1
	v1_2_1:1.1.1.1.4.1
	v1_2_stable:1.1.1.1.4.1
	v1_1d1:1.1.1.1.4.1
	v1_1d0:1.1.1.1.4.1
	v1_1c9_1:1.1.1.1.4.1
	v1_1c9:1.1.1.1.4.1
	v1_1c8:1.1.1.1.4.1
	v1_1c7:1.1.1.1.4.1
	v1_1c6:1.1.1.1.4.1
	v1_1d-start:1.1.1.1.4.1
	v1_1c5:1.1.1.1.4.1
	v1_1dev:1.1.1.1.4.1.0.2
	v1_1c4:1.1.1.1.4.1
	v1_1c3:1.1.1.1.4.1
	v1_1c2:1.1.1.1.4.1
	v1_1c1:1.1.1.1.4.1
	v1_1c0:1.1.1.1.4.1
	v1_1b9_31:1.1.1.1.4.1
	v1_1b9_30:1.1.1.1.4.1
	v1_1b9_28:1.1.1.1.4.1
	v1_1b9_27:1.1.1.1.4.1
	v1_1b9_26:1.1.1.1.4.1
	r1_1b9_25:1.1.1.1.4.1
	r1_1b9_24:1.1.1.1.4.1
	v1_1b9_23:1.1.1.1.4.1
	v1_1b9_22:1.1.1.1.4.1
	v1_1b9_20:1.1.1.1.4.1
	v1_1b9_18:1.1.1.1.4.1
	v1_1b9_16:1.1.1.1.4.1
	v1_1b9_15:1.1.1.1.4.1
	v1_1b9_13:1.1.1.1.4.1
	v1_1b9_12:1.1.1.1.4.1
	v1_1b9_11:1.1.1.1.4.1
	v1_1b9_08:1.1.1.1.4.1
	v1_1b9_07:1.1.1.1.4.1
	r1_1b9:1.1.1.1.4.1
	v1_1b8:1.1.1.1.4.1
	v1_1b7:1.1.1.1.4.1
	v1_1b6:1.1.1.1.4.1
	v1_1r:1.1.1.1.0.4
	v1_1:1.1.1.1
	v1_0r:1.1.1.1.0.2
	v1_0:1.1.1.1
	RUBY:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2002.06.11.07.02.23;	author matz;	state Exp;
branches;
next	1.6;

1.6
date	2002.06.06.11.14.04;	author H_Konishi;	state Exp;
branches;
next	1.5;

1.5
date	2000.07.31.09.21.25;	author matz;	state Exp;
branches;
next	1.4;

1.4
date	2000.07.25.07.21.54;	author matz;	state Exp;
branches;
next	1.3;

1.3
date	2000.07.10.04.49.24;	author matz;	state Exp;
branches;
next	1.2;

1.2
date	99.08.13.05.45.19;	author matz;	state Exp;
branches;
next	1.1;

1.1
date	98.01.16.12.13.08;	author matz;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.01.16.12.13.08;	author matz;	state Exp;
branches
	1.1.1.1.4.1;
next	1.1.1.2;

1.1.1.2
date	99.01.20.04.59.37;	author matz;	state Exp;
branches
	1.1.1.2.2.1;
next	;

1.1.1.2.2.1
date	99.02.09.06.08.24;	author matz;	state Exp;
branches;
next	;

1.1.1.1.4.1
date	98.01.16.12.36.10;	author matz;	state Exp;
branches;
next	;


desc
@@


1.7
log
@* eval.c (rb_eval): ruby_frame->last_func may be null, if it's
  called outside of a method.

* parse.y (arg): use INT2NUM, not INT2FIX for tUMINUS.

* parse.y (arg): unnecessary negative tPOW treatment.

* parse.y (tokadd_escape): wrong backslash escapement.

* parse.y (stmt,arg): too much void value check.

* parse.y (stmt,arg): need to check void value on rules which does
  not use node_assign().

* ext/socket/socket.c (ipaddr): need not to taint hostnames.

* range.c (range_include): should be based on "<=>", whereas
  member? still is based on "each".

* range.c (range_min,range_max): redefine methods based on "<=>".
@
text
@#!/usr/local/bin/ruby
#
#               biorhythm.rb - 
#                       $Release Version: $
#                       $Revision: 1.6 $
#                       $Date: 2002/06/06 11:14:04 $
#                       by Yasuo OHBA(STAFS Development Room)
#
# --
#
#       
#

# probably based on:
#
# Newsgroups: comp.sources.misc,de.comp.sources.os9
# From: fkk@@stasys.sta.sub.org (Frank Kaefer)
# Subject: v41i126:  br - Biorhythm v3.0, Part01/01
# Message-ID: <1994Feb1.070616.15982@@sparky.sterling.com>
# Sender: kent@@sparky.sterling.com (Kent Landfield)
# Organization: Sterling Software
# Date: Tue, 1 Feb 1994 07:06:16 GMT
#
# Posting-number: Volume 41, Issue 126
# Archive-name: br/part01
# Environment: basic, dos, os9

include Math
require "date.rb"
require "parsearg.rb"
require "parsedate.rb"

def usage()
  print "Usage:\n"
  print "biorhythm.rb [options]\n"
  print "  options...\n"
  print "    -D YYYYMMDD(birthday)     : use default values.\n"
  print "    --sdate | --date YYYYMMDD : use system date; use specified date.\n"
  print "    --birthday YYYYMMDD       : specifies your birthday.\n"
  print "    -v | -g                   : show values or graph.\n"
  print "    --days DAYS               : graph range (only in effect for graphs).\n"
  print "    --help                    : help\n"
end
$USAGE = 'usage'

def printHeader(y, m, d, p, w)
  print "\n>>> Biorhythm <<<\n"
  printf "The birthday %04d.%02d.%02d is a %s\n", y, m, d, w
  printf "Age in days: [%d]\n\n", p
end

def getPosition(z)
  pi = Math::PI
  z = Integer(z)
  phys = (50.0 * (1.0 + sin((z / 23.0 - (z / 23)) * 360.0 * pi / 180.0))).to_i
  emot = (50.0 * (1.0 + sin((z / 28.0 - (z / 28)) * 360.0 * pi / 180.0))).to_i
  geist =(50.0 * (1.0 + sin((z / 33.0 - (z / 33)) * 360.0 * pi / 180.0))).to_i
  return phys, emot, geist
end

def parsedate(s)
  ParseDate::parsedate(s).select(0, 1, 2)
end

def name_of_week(date)
  Date::DAYNAMES[date.wday]
end

#
# main program
#
parseArgs(0, nil, "vg", "D:", "sdate", "date:", "birthday:", "days:")

if $OPT_D
  dd = Date.today
  bd = Date.new(*parsedate($OPT_D))
  ausgabeart = "g"
else
  if $OPT_birthday
    bd = Date.new(*parsedate($OPT_birthday))
  else
    printf(STDERR, "Birthday                      (YYYYMMDD) : ")
    if (si = STDIN.gets.chop) != ""
      bd = Date.new(*parsedate(si))
    end
  end
  if !bd
    printf STDERR, "BAD Input Birthday!!\n"
    exit()
  end
  
  if $OPT_sdate
    dd = Date.today
  elsif $OPT_date
    dd = Date.new(*parsedate($OPT_date))
  else
    printf(STDERR, "Date        [<RETURN> for Systemdate] (YYYYMMDD) : ")
    if (si = STDIN.gets.chop) != ""
      dd = Date.new(*parsedate(si))
    end
  end
  if !dd
    dd = Date.today
  end

  if $OPT_v
    ausgabeart = "v"
  elsif $OPT_g
    ausgabeart = "g"
  else
    printf(STDERR, "Values for today or Graph  (v/g) [default g] : ")
    ausgabeart = STDIN.gets.chop
  end
end
if (ausgabeart == "v")
  printHeader(bd.year, bd.month, bd.day, dd - bd, name_of_week(bd))
  print "\n"
  
  phys, emot, geist = getPosition(dd - bd)
  printf "Biorhythm:   %04d.%02d.%02d\n", dd.year, dd.month, dd.day
  printf "Physical:    %d%%\n", phys
  printf "Emotional:   %d%%\n", emot
  printf "Mental:      %d%%\n", geist
  print "\n"
else
  if $OPT_days
    display_period = $OPT_days.to_i
  elsif $OPT_D
    display_period = 9
  else
    printf(STDERR, "Graph for how many days     [default 10] : ")
    display_period = STDIN.gets.chop
    if (display_period == "")
      display_period = 9
    else
      display_period = display_period.to_i - 1
    end
  end

  printHeader(bd.year, bd.month, bd.day, dd - bd, name_of_week(bd))
  print "                     P=physical, E=emotional, M=mental\n"
  print "             -------------------------+-------------------------\n"
  print "                     Bad Condition    |    Good Condition\n"
  print "             -------------------------+-------------------------\n"
  
  (dd - bd).step(dd - bd + display_period) do |z|
    phys, emot, geist = getPosition(z)
    
    printf "%04d.%02d.%02d : ", dd.year, dd.month, dd.day
    p = (phys / 2.0 + 0.5).to_i
    e = (emot / 2.0 + 0.5).to_i
    g = (geist / 2.0 + 0.5).to_i
    graph = "." * 51
    graph[25] = ?|
    graph[p] = ?P
    graph[e] = ?E
    graph[g] = ?M
    print graph, "\n"
    dd = dd + 1
  end
  print "             -------------------------+-------------------------\n\n"
end
@


1.6
log
@* sample/biorhythm.rb (getPosiiton,etc)
  fix at changing Date module ( Date is changed Fixnum to Rational )
@
text
@d5 2
a6 2
#                       $Revision: 1.5 $
#                       $Date: 2000/07/31 09:21:25 $
d54 1
a54 1
  z  = Integer(z)
d62 1
a62 1
  ParseDate::parsedate(s).indexes(0, 1, 2)
@


1.5
log
@matz - biorhythm.rb
@
text
@d5 2
a6 2
#                       $Revision: 1.4 $
#                       $Date: 2000/07/25 07:21:54 $
d54 1
d146 1
a146 1
  for z in (dd - bd)..(dd - bd + display_period)
@


1.4
log
@matz
@
text
@d5 2
a6 2
#                       $Revision: 1.3 $
#                       $Date: 2000/07/10 04:49:24 $
d53 1
a53 1
  pi = 3.14159265
d65 1
a65 1
  Date::DAYNAMES[(date.jd + 1) % 7]
d74 1
a74 2
  now = Time.now
  dd = Date.new(now.year, now.month, now.day)
d92 1
a92 2
    now = Time.now
    dd = Date.new(now.year, now.month, now.day)
d102 1
a102 2
    now = Time.now
    dd = Date.new(now.year, now.month, now.day)
d115 1
a115 1
  printHeader(bd.year, bd.month, bd.day, dd.jd - bd.jd, name_of_week(bd))
d118 1
a118 1
  phys, emot, geist = getPosition(dd.jd - bd.jd)
d139 1
a139 1
  printHeader(bd.year, bd.month, bd.day, dd.jd - bd.jd, name_of_week(bd))
d145 1
a145 1
  for z in (dd.jd - bd.jd)..(dd.jd - bd.jd + display_period)
@


1.3
log
@matz
@
text
@d5 2
a6 2
#                       $Revision: 1.2 $
#                       $Date: 1999/08/13 05:45:19 $
d31 1
d60 8
d74 3
a76 2
  dd = Date.new(Time.now.strftime("%Y%m%d"))
  bd = Date.new($OPT_D)
d80 1
a80 1
    bd = Date.new($OPT_birthday)
d84 1
a84 1
      bd = Date.new(si)
d93 2
a94 1
    dd = Date.new(Time.now.strftime("%Y%m%d"))
d96 1
a96 1
    dd = Date.new($OPT_date)
d100 1
a100 1
      dd = Date.new(si)
d104 2
a105 1
    dd = Date.new(Time.now.strftime("%Y%m%d"))
d118 1
a118 1
  printHeader(bd.year, bd.month, bd.day, dd.period - bd.period, bd.name_of_week)
d121 1
a121 1
  phys, emot, geist = getPosition(dd.period - bd.period)
d142 1
a142 1
  printHeader(bd.year, bd.month, bd.day, dd.period - bd.period, bd.name_of_week)
d148 1
a148 1
  for z in (dd.period - bd.period)..(dd.period - bd.period + display_period)
@


1.2
log
@1.4.0
@
text
@d5 2
a6 2
#                       $Revision: 1.1.1.2.2.1 $
#                       $Date: 1999/02/09 06:08:24 $
d13 14
@


1.1
log
@Initial revision
@
text
@d5 2
a6 2
#                       $Revision: 1.3 $
#                       $Date: 1997/02/14 11:07:08 $
d22 5
a26 5
  print "    -D YYYYMMDD(birthday)     : すべて default 値を使う. \n"
  print "    --sdate | --date YYYYMMDD : system date もしくは指定した日付を使う.\n"
  print "    --birthday YYYYMMDD       : 誕生日の指定をする.  \n"
  print "    -v | -g                   : Values or Graph の指定. \n"
  print "    --days DAYS               : 期間の指定をする(Graph の時のみ有効). \n"
@


1.1.1.1
log
@
@
text
@@


1.1.1.2
log
@ruby 1.3 cycle
@
text
@d5 2
a6 2
#                       $Revision: 1.1.1.1.4.1 $
#                       $Date: 1998/01/16 12:36:10 $
@


1.1.1.2.2.1
log
@990209
@
text
@d5 2
a6 2
#                       $Revision: 1.1.1.2 $
#                       $Date: 1999/01/20 04:59:37 $
d22 5
a26 5
  print "    -D YYYYMMDD(birthday)     : use default values.\n"
  print "    --sdate | --date YYYYMMDD : use system date; use specified date.\n"
  print "    --birthday YYYYMMDD       : specifies your birthday.\n"
  print "    -v | -g                   : show values or graph.\n"
  print "    --days DAYS               : graph range (only in effect for graphs).\n"
@


1.1.1.1.4.1
log
@*** empty log message ***
@
text
@d5 2
a6 2
#                       $Revision: 1.1.1.1 $
#                       $Date: 1998/01/16 04:05:50 $
@
